"use strict";const e=e=>new Promise((t=>setTimeout(t,e))),t=async t=>{let n;for(;!(n=t());)await e(1);return n};var n,o=n=class{constructor(e){n.prototype.__init.call(this),n.prototype.__init2.call(this),n.prototype.__init3.call(this),n.prototype.__init4.call(this),this.title=e,this.logs=[]}__init(){this._print=(e,...t)=>{switch(e){case"log":console.log(`%cVelocity %c ${this.title} %c`,"background: #5B88FC; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #5B88FC; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t);break;case"warn":console.warn(`%cVelocity %c ${this.title} %c`,"background: #FFC107; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #FFC107; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t);break;case"error":console.error(`%cVelocity %c ${this.title} %c`,"background: #F44336; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #F44336; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t)}}}__init2(){this.log=(e,...t)=>{this._print("log",e,...t),this.logs.push(t)}}__init3(){this.warn=(e,...t)=>{this._print("warn",e,...t),this.logs.push(t)}}__init4(){this.error=(e,...t)=>{this._print("error",e,...t),this.logs.push(t)}}};function a(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const i=new o("Webpack"),c="webpackChunkdiscord_app",r=new Promise((async t=>{for(;!window[c];)await e(1);t()})),l={byDisplayName:e=>t=>a([t,"access",e=>e.default,"optionalAccess",e=>e.displayName])===e,byProps:(...e)=>t=>{if(e.every((e=>void 0!==t[e])))return!0;return!!e.every((e=>void 0!==a([t,"access",e=>e.default,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.Z,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.ZP,"optionalAccess",t=>t[e]])))||void 0},byPrototypeFields:e=>t=>{if(e.every((e=>void 0!==a([t,"access",e=>e.prototype,"optionalAccess",t=>t[e]]))))return!0;return!!e.every((e=>void 0!==a([t,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.Z,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.ZP,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])))||void 0},byStrings:(...e)=>t=>{Object.keys(t).forEach((n=>e.every((e=>t[n].toString().includes(e)))))},byPrototypeStrings:(e,...t)=>n=>{if(t.every((t=>a([n,"access",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)]))))return!0;return!!t.every((t=>a([n,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])||a([n,"access",e=>e.Z,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])||a([n,"access",e=>e.ZP,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])))||void 0},byAllPrototypeStrings:(...e)=>t=>{Object.keys(t.prototype).forEach((n=>e.every((e=>a([t,"access",e=>e.prototype,"optionalAccess",e=>e[n],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",t=>t(e)])))))}};let s;const d=()=>s||(s=window[c].push([[Symbol("Velocity")],{},e=>e]),s),u=[],p=()=>{const e=d();let t=0;for(const n in e.c){if(u.includes(n))continue;if(!Object.hasOwnProperty.call(e.c,n))return;let o=e.c[n].exports;o&&(o.default||(["Z","ZP"].forEach((e=>{o[e]&&(o.default=o[e],t++)})),u.push(n)))}i.log(`Remapped ${t} default exports`)},m=(e,t=!1)=>{let n=!1;switch(typeof e){case"string":e=l.byDisplayName(e);break;case"object":Array.isArray(e)&&(e=l.byProps(...e))}const o=d();let a=[];for(let t in o.c){if(!Object.hasOwnProperty.call(o.c,t))return;let i=o.c[t].exports;if(i!==window&&i){!i.Z&&!i.ZP||i.default||p();try{e(i)&&a.push(i)}catch(e){n=e}}}return n&&i.warn("Filter threw an error:",n),t?a:a[0]},f=async(t,n=!1)=>{for(;!d();)await e(1);for(;!m(t,n);)await e(1);return m(t,n)};let h={};r.then((async()=>{const e=await f((e=>{for(const t of Object.keys(e))if(a([e,"access",e=>e[t],"optionalAccess",e=>e.DYNAMIC]))return!0})),t=await f((e=>{for(const t of Object.keys(e))if(e[t]&&"function"==typeof e[t].toString&&e[t].toString().includes("onCloseCallback()"))return!0})),n=await f((e=>{for(const t of Object.keys(e))if(e[t]&&"function"==typeof e[t].toString&&e[t].toString().includes("borderColor")&&e[t].toString().includes("e.grow"))return!0})),o=await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("customColor")]))),i={};m((e=>{let t=!1;for(const n of Object.values(e))"function"==typeof n&&(n.toString().includes("CONTEXT_MENU_CLOSE")?(i.closeContextMenu=n,t=!0):t&&n.toString().includes("renderLazy")&&(i.openContextMenu=n,t=!0));return t})),h={Dispatcher:(await f(["dispatch","isDispatching"])).default,React:await f(["createElement","useEffect"]),ReactDOM:await f(["render","hydrate"]),ReactSpring:await f(["useSpring","animated"]),Stores:{MessageStore:(await f(["getMessage","getMessages"])).default,SelectedGuildStore:(await f(["getLastSelectedGuildId"])).default,SelectedChannelStore:(await f(["getLastSelectedChannelId"])).default,UserStore:(await f(["getCurrentUser"])).default,RelationshipStore:(await f(["isBlocked"])).default,GuildStore:(await f(["getGuild"])).default,GuildMemberStore:(await f(["getMember"])).default,ChannelStore:(await f(["hasChannel"])).default,InviteStore:(await f(["getInvites"])).default},Components:{FormText:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.Sizes,"optionalAccess",e=>e.SIZE_32])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.Colors]))),FormDivider:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("().divider")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("style")]))),SwitchItem:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("helpdeskArticleId")]))),Popout:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("shouldShowPopout")]))),ConfirmModal:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("confirmText")]))),TextInput:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("inputClassName")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("inputPrefix")]))),TextForm:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("minLength")]))),TooltipContainer:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("shouldShowTooltip")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.Positions]))),ButtonModules:{_ButtonModules:n,default:Object.values(n).find((e=>e.toString().includes("borderColor")&&e.toString().includes("e.grow"))),ButtonColors:Object.values(n).find((e=>e.BRAND_NEW)),ButtonLooks:Object.values(n).find((e=>e.FILLED)),ButtonSizes:Object.values(n).find((e=>e.TINY))},ColorPickerModules:{_ColorPickerModules:o,default:o.default,CustomColorPicker:Object.values(o).find((e=>e.toString().includes("handleHexChange"))),CustomColorButton:Object.values(o).find((e=>a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("customColor")])&&a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("isCustom")]))),DefaultColorButton:Object.values(o).find((e=>a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("isDefault")])))},Slider:await f(l.byPrototypeFields(["renderMark"])),PanelButton:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("onContextMenu")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("tooltipText")]))),Switch:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("PRIMARY_DARK_400")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("STATUS_GREEN_600")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("checkbox")]))),Anchor:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.contextType])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.defaultProps])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.renderNonInteractive]))),Markdown:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.rules])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.defaultProps,"optionalAccess",e=>e.parser]))),Text:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.Sizes,"optionalAccess",e=>e.SIZE_10]))),VarientText:await f((e=>"p"===a([e,"access",e=>e.x,"optionalAccess",e=>e.name]))),ModalElements:{_ModalElements:e,ModalHeader:Object.values(e).find((e=>e.toString().includes("wrap")&&e.toString().includes("header"))),ModalFooter:Object.values(e).find((e=>e.toString().includes("wrap")&&e.toString().includes("footer"))),ModalRoot:Object.values(e).find((e=>e.toString().includes("size")&&e.toString().includes("dialog"))),ModalContent:Object.values(e).find((e=>e.toString().includes("scrollerRef")&&e.toString().includes("content"))),CloseButton:Object.values(e).find((e=>e.toString().includes("BLANK")&&e.toString().includes("withCircleBackground")))},EmptyState:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("onCTAClick")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("description")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("artURL")])&&!a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("stream")]))),Alert:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("title")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("body")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("secondaryConfirmText")])&&!a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("DONT_ASK_AGAIN")])))},Constants:{},Icons:{Pin:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M19 3H4.99C3.88 3 3.01 3.89 3.01 5L3")]))),Gear:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M14 7V9C14 9 12.5867 9 12.5733 9.00667C12.42 9.58667 12.1733 10.1267 11.84 10.6067L12.74 11.5067L11")]))),Plus:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("15 10 10 10 10 15 8 15 8 1")]))),Pencil:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M19.2929 9.8299L19.9409 9.18278C21.353")]))),Play:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("0 0 0 14 11 7")]))),Trash:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z")]))),Rocket:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M4.92871 13.4149L10.5857 19.0709L18.363")]))),Link:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.0")]))),PersonAdd:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M6.5 8.00667C7.88 8.00667 9 6.88667 9 5.50667C9 4.12667 7.88 3.00667 6.5 3.00667C5.12 3.00667 4 4.12667 4 5.50667C4 6.88667 5.12 8.00667")]))),Upload:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v")]))),Search:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M21.707 20.293L16.314 14.9C17.403 13.504 18 11.79")]))),Folder:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M20 7H12L10.553 5.106C10.214 4.428 9")]))),Retry:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M12 2C6.485 2 2 6.485 2 12H5.33333C5.33333 8.32")]))),Overflow:await f((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M7 12.001C7 10.8964 6.10457 10.001 5 10.001C3.89543 10.001 3 10.8964")])))},Classes:{Anchor:await f(["anchorUnderlineOnHover"]),ContextMenu:await f(["menu","iconContainer"]),Titles:await f(["h1","h2"]),RadioItems:await f(["item","collapsibleItem"]),Position:await f(["directionRow"])},Actions:{ContextMenuActions:i,ModalActions:{_ModalActions:t,openModal:Object.values(t).find((e=>a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("onCloseCallback")])&&a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("Layer")]))),closeModal:Object.values(t).find((e=>a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("onCloseCallback()")])))},Invites:(await f(["acceptInvite"])).default}}}));var w={chunkName:c,Filters:l,globalPromise:r,findModule:m,waitFor:f,remapDefaults:p,find:m,findByDisplayName:e=>m(l.byDisplayName(e)),findByProps:(...e)=>m(l.byProps(...e)),findByPrototypes:(...e)=>m(l.byPrototypeFields(e)),get __ORIGINAL_CHUNKS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return window[c]},get summon(){return s},get common(){return h}};const g=document.createElement("velocity-head"),y=document.createElement("velocity-component-styles"),v=document.createElement("velocity-themes"),b=document.createElement("velocity-snippets"),C=document.createElement("velocity-toasts"),R=document.createElement("velocity-notifications"),E=document.createElement("velocity-body");new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e)})).then((()=>{document.head.appendChild(g),document.body.appendChild(E),g.appendChild(y),g.appendChild(v),g.appendChild(b),E.appendChild(R),E.appendChild(C)}));const x=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),S=(e,t)=>{let n=document.createElement("style");n.setAttribute("id",`velocity-component-${e}-style`);for(const e in t){let o="";for(const n in t[e])o+=`${x(n)}: ${t[e][n]};`;n.innerHTML+=`${e} { ${o} }`}y.appendChild(n)};S("notification",{".velocity-notification":{backgroundColor:"var(--velocity-notification-background, var(--background-floating))",borderRadius:"5px",padding:"15px",color:"var(--header-primary)",backdropFilter:"blur(var(--velocity-notification-blur))",zIndex:"1",maxWidth:"325px",width:"fit-content",borderLeft:"5px solid #fff",transition:"all 0.2s ease",pointerEvents:"all"},".velocity-notification.color-velocity":{borderColor:"#5B88FC"},".velocity-notification.color-success":{borderColor:"#43B581"},".velocity-notification.color-error":{borderColor:"#F04747"},".velocity-notification.color-warning":{borderColor:"#FAA61A"},".notification-title":{fontSize:"16px",fontWeight:"600",display:"flex",justifyContent:"space-between",alignItems:"center"},".notification-close":{cursor:"pointer",fontSize:"16px",backgroundColor:"transparent",border:"none",color:"var(--interactive-normal)",transition:"color 0.2s ease"},".notification-close:hover":{color:"var(--interactive-hover)"},".notification-content":{fontSize:"14px",marginTop:"5px",color:"var(--header-secondary)",overflow:"hidden",textOverflow:"ellipsis"},".notification-buttons":{display:"grid",marginTop:"10px",gap:"5px",gridTemplateColumns:"repeat(var(--buttons, 1), 1fr )"}});var A=()=>React.forwardRef(((e,t)=>{const{title:n,color:o,children:a,buttons:i,id:c,onContextMenu:r,close:l}=e,s=w.common.Components.ButtonModules.default,d=w.common.Components.ButtonModules.ButtonColors,u=w.common.Components.ButtonModules.ButtonSizes;return window.React.createElement("div",{onContextMenu:r,className:`velocity-notification color-${o}`,ref:t},window.React.createElement("div",{className:"notification-title"},n,window.React.createElement("button",{className:"notification-close",onClick:()=>{l()}},window.React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},window.React.createElement("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})))),window.React.createElement("div",{className:"notification-content"},a),i.length?window.React.createElement("div",{className:"notification-buttons",style:{"--buttons":i.length}},i.map((e=>window.React.createElement(s,{size:u.TINY,color:d[e.color]||d.BRAND,onClick:e.action,disabled:e.disabled},e.label)))):null)}));S("toast",{".velocity-toast":{backgroundColor:"var(--background-floating)",borderRadius:"5px",padding:"10px 15px",color:"var(--header-primary)",zIndex:"1",fontSize:"16px",fontWeight:"500",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"all",width:"fit-content"},".velocity-toast.color-velocity":{backgroundColor:"#5B88FC"},".velocity-toast.color-success":{backgroundColor:"#43B581"},".velocity-toast.color-error":{backgroundColor:"#F04747"},".velocity-toast.color-warning":{backgroundColor:"#FAA61A"}});var k=e=>{const{children:t,color:n}=e;return window.React.createElement("div",{className:`velocity-toast color-${n}`},t)};const N=e=>{const{toasts:t}=e,[n,o]=React.useState(t),{useTransition:a,animated:i}=w.common.ReactSpring,c=e=>{o([...e])};React.useEffect((()=>(t.addListener(c),t.forEach((e=>{if(e.timeout){e.timeSet=!0;const n=setTimeout((()=>{t.splice(t.findIndex((t=>t.id===e.id)),1),o(t),clearTimeout(n)}),e.timeout)}})),()=>{t._removeListener(c)})));const r=a(n,{from:{translateY:-15,opacity:0,height:0,marginTop:0},enter:{translateY:0,opacity:1,height:36,marginTop:10},leave:{translateY:-15,opacity:0,height:0,marginTop:0},config:{mass:1,tension:185,friction:26}});return window.React.createElement("div",{className:"velocity-toast-wrapper"},r(((e,t)=>window.React.createElement(i.div,{className:"velocity-toast-container-item",style:e},window.React.createElement(k,{...t})))))},j=e=>{const{notifications:t}=e,{useTransition:n,animated:o}=w.common.ReactSpring,[a,i]=React.useState(t),c=A(),r=e=>{i([...e])},l=React.useRef(null);React.useEffect((()=>(t.addListener(r),t.forEach((e=>{if(e.timeout){e.timeSet=!0;const n=setTimeout((()=>{t.splice(t.findIndex((t=>t.id===e.id)),1),i(t),clearTimeout(n)}),e.timeout)}})),()=>{t._removeListener(r)})));const s=n(a,{from:{translateY:-15,opacity:0,height:0,marginTop:0},enter:e=>async e=>{await e({translateY:0,opacity:1,height:l.current?l.current.clientHeight:0,marginTop:10})},leave:{translateY:-15,opacity:0,height:0,marginTop:0},config:{mass:1,tension:185,friction:26}});return window.React.createElement("div",{className:"velocity-notification-wrapper"},s(((e,t)=>window.React.createElement(o.div,{className:"velocity-notification-container-item",style:e},window.React.createElement(c,{...t,ref:l})))))};S("context-menu",{".velocity-context-menu":{flexDirection:"column"},".velocity-menu-item:hover":{backgroundColor:"var(--brand-experiment-560)",color:"#fff"},".velocity-menu-item .velocity-menu-checkbox":{color:"#fff"},".velocity-menu-item .velocity-menu-check":{color:"var(--brand-experiment-560)"}});const M=e=>{const{Classes:t}=w.common,n=t.ContextMenu;return window.React.createElement("div",{className:`velocity-context-menu ${n.scroller} ${n.menu} ${n.flexible}`},e.children)},T=e=>{const{Classes:t,Actions:n}=w.common,o=n.ContextMenuActions,a=t.ContextMenu,{type:i,label:c,action:r,color:l,checked:s,disabled:d,onChange:u,icon:p}=e,[m,f]=React.useState(s);switch(i){case"separator":return window.React.createElement("div",{role:"separator",className:a.separator});case"check":return window.React.createElement("div",{role:"menuitem",className:`velocity-menu-item ${d?a.disabled:""} ${a.item} ${a.labelContainer} ${a[`color${l||"Default"}`]}`,onClick:e=>{!d&&r&&r(e),u&&u(!m),f(!m)}},window.React.createElement("div",{className:a.label},c),window.React.createElement("div",{className:a.iconContainer},window.React.createElement("svg",{className:a.icon,"aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},m?[window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.37499 3H18.625C19.9197 3 21.0056 4.08803 21 5.375V18.625C21 19.936 19.9359 21 18.625 21H5.37499C4.06518 21 3 19.936 3 18.625V5.375C3 4.06519 4.06518 3 5.37499 3Z",class:`velocity-menu-checkbox ${a.checkbox}`,fill:"currentColor"}),window.React.createElement("path",{d:"M9.58473 14.8636L6.04944 11.4051L4.50003 12.9978L9.58473 18L19.5 8.26174L17.9656 6.64795L9.58473 14.8636Z",className:`velocity-menu-check ${a.check}`,fill:"currentColor"})]:window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.625 3H5.375C4.06519 3 3 4.06519 3 5.375V18.625C3 19.936 4.06519 21 5.375 21H18.625C19.936 21 21 19.936 21 18.625V5.375C21.0057 4.08803 19.9197 3 18.625 3ZM19 19V5H4.99999V19H19Z",fill:"currentColor"}))));default:return window.React.createElement("div",{role:"menuitem",className:`velocity-menu-item ${d?a.disabled:""} ${a.item} ${a.labelContainer} ${a[`color${l||"Default"}`]}`,onClick:e=>{!d&&r&&r(e),o.closeContextMenu()}},window.React.createElement("div",{className:a.label},c),p&&window.React.createElement("div",{className:a.iconContainer},window.React.createElement("icon",{className:a.icon})))}},L=(e,t)=>{const{Actions:n}=w.common,o=n.ContextMenuActions,a=(e=>window.React.createElement(M,null,e.map((e=>window.React.createElement(T,{...e})))))(t);return o.openContextMenu(e,(()=>a)),a};class P extends Array{constructor(...e){super(...e),this._listeners=[]}addListener(e){return this._listeners.push(e),()=>this._removeListener(e)}_removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}_notifyListeners(){this._listeners.forEach((e=>e(this)))}push(...e){const t=super.push(...e);return this._notifyListeners(),t}pop(){const e=super.pop();return this._notifyListeners(),e}shift(){const e=super.shift();return this._notifyListeners(),e}unshift(...e){const t=super.unshift(...e);return this._notifyListeners(),t}splice(...e){const t=super.splice(...e);return this._notifyListeners(),t}sort(...e){const t=super.sort(...e);return this._notifyListeners(),t}filter(...e){const t=super.filter(...e);return this._notifyListeners(),t}activeFilter(...e){const t=super.filter(...e);return this.splice(0,this.length,...t),this._notifyListeners(),t}insertNew(e,t){let n=0;switch(t){case"object":n=this.findIndex((t=>t[0]===e[0]));break;case"string":n=this.findIndex((t=>t===e))}return this._notifyListeners(),n?(this.splice(n,0,e),this.push(e)):this.push(e)}}S("notifications",{".velocity-notification-wrapper":{position:"fixed",right:"15px",top:"15px",zIndex:"1001",display:"flex",flexDirection:"column",alignItems:"flex-end",transition:"all 0.2s ease",pointerEvents:"none"},".velocity-toast-wrapper":{position:"fixed",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15px",width:"100%",zIndex:"3000",pointerEvents:"none",transition:"all 0.2s ease",pointerEvents:"none"}});let $=0;const O=new P,I=(e,t={})=>{const{type:n="",timeout:o=3e3}=t;$++;const a={color:n,id:$,children:e,timeout:o};O.push(a)};let D=0;const F=new P,_=(e={})=>{const{title:t="",content:n="",buttons:o=[],type:a=""}=e;D++;const i={id:D,color:a,title:t,buttons:o,children:n,close:()=>{F.splice(F.indexOf(i),1)},onContextMenu:e=>L(e,[{label:"Close",action:()=>{F.splice(F.indexOf(i),1)}},{label:"Close All",color:"Danger",action:()=>{F.splice(0,F.length)}}])};F.push(i)},B=(e={})=>{const{Components:t,Actions:n,Classes:o}=w.common,{title:a="",content:i="",confirmText:c="Confirm",cancelText:r="Cancel",onConfirm:l=(()=>{}),onCancel:s=(()=>{}),danger:d=!1}=e,u=t.Text.default,p=n.ModalActions,m=t.Markdown.default,f=t.ModalElements,h=t.ButtonModules.default,g=t.ButtonModules.ButtonLooks,y=t.ButtonModules.ButtonColors;return p.openModal((e=>window.React.createElement(f.ModalRoot,{...e},window.React.createElement(f.ModalHeader,{separator:!1},window.React.createElement(u,{size:u.Sizes.SIZE_20,color:u.Colors.HEADER_PRIMARY,className:o.Titles.h1},a)),window.React.createElement(f.ModalContent,{className:"velocity-modal-content"},"string"==typeof i?window.React.createElement(m,{className:"velocity-modal-content"},i):i),window.React.createElement(f.ModalFooter,null,window.React.createElement(h,{color:d?y.RED:y.BRAND,onClick:t=>{l(t),e.onClose()}},c),window.React.createElement(h,{color:y.PRIMARY,look:g.LINK,onClick:t=>{s(t),e.onClose()}},r)))))},V=new o("Datastore"),U=VelocityCore.modules.fs,z=VelocityCore.modules.path,H=VelocityCore.baseDir,W=()=>{U.existsSync(Z)||U.mkdirSync(Z)},Z=z.join(H,"data"),G=e=>{W();try{return U.existsSync(z.join(Z,`${e}.json`))?JSON.parse(U.readFileSync(z.join(Z,`${e}.json`),"utf8")):{}}catch(e){V.error(e)}},q=(e,t)=>{W();try{return G(e)[t]||null}catch(e){V.error(e)}},Y=(e,t,n)=>{W();try{const o=G(e);o[t]=n,U.writeFileSync(z.join(Z,`${e}.json`),JSON.stringify(o))}catch(e){V.error(e)}},J=(e,t)=>{W();try{const n=G(e);delete n[t],U.writeFile(z.join(Z,`${e}.json`),JSON.stringify(n))}catch(e){V.error(e)}},K={},X=e=>{let t;return K[e]?t=K[e]:(t=G(e),K[e]=t),new Proxy(t,{get:(n,o)=>t[o]||q(e,o),set:(n,o,a)=>(t[o]=a,Y(e,o,a),!0),deleteProperty:(n,o)=>(t[o]=void 0,J(e,o),!0)})};var Q=Object.freeze({__proto__:null,dir:Z,getAllData:G,getData:q,setData:Y,deleteData:J,Stream:X}),ee={intToHex(e){const t=e.toString(16);return`#${6!==t.length?"0".repeat(6-t.length)+t:t}`},hexToRGB(e){const[t,n,o]=e.match(/\w\w/g).map((e=>parseInt(e,16)));return[t,n,o]},rgbToHSL(e){const{r:t,g:n,b:o}=e,a=t/255,i=n/255,c=o/255;let r=Math.max(a,i,c),l=Math.min(a,i,c),s=(r+l)/2,d=s,u=s;if(r===l)return[0,0,u];const p=r-l;switch(d=u>=.5?p/(2-(r+l)):p/(r+l),r){case a:s=60*((i-c)/p+0);break;case i:s=60*((c-a)/p+2);break;case c:s=60*((a-i)/p+4)}return[Math.round(s),Math.round(100*d),Math.round(100*u)]},hexToHSL(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16)/255,o=parseInt(t[2],16)/255,a=parseInt(t[3],16)/255,i=Math.max(n,o,a),c=Math.min(n,o,a);let r=(i+c)/2,l=r,s=r;if(i===c)return[0,0,s];const d=i-c;switch(l=s>.5?d/(2-i-c):d/(i+c),i){case n:r=(o-a)/d+(o<a?6:0);break;case o:r=(a-n)/d+2;break;case a:r=(n-o)/d+4}return r/=6,l*=100,l=Math.round(l),s*=100,s=Math.round(s),r=Math.round(360*r),[r,l,s]},rgbToHex(e){const{r:t,g:n,b:o}=e;return`#${((1<<24)+(t<<16)+(n<<8)+o).toString(16).slice(1)}`},hslToRGB(e){const t=e[0]/360,n=e[1]/100,o=e[2]/100;let a,i,c;if(0===n)a=i=c=o;else{const e=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),r=o<.5?o*(1+n):o+n-o*n,l=2*o-r;a=e(l,r,t+1/3),i=e(l,r,t),c=e(l,r,t-1/3)}return[Math.round(255*a),Math.round(255*i),Math.round(255*c)]},getType(e){const t=e.toLowerCase().trim();return t.startsWith("#")?"hex":t.startsWith("rgba")?"rgba":t.startsWith("rgb")?"rgb":t.startsWith("hsla")?"hsla":t.startsWith("hsl")?"hsl":"int"},getVariable(e,t){const n=document.documentElement,o=getComputedStyle(n).getPropertyValue(e.startsWith("--")?e:`--${e}`).trim();if(o.includes("calc"))return o;if(o.includes("var"))return o;const a=this.getType(o);switch(t){case"hex":if("hex"===a)return o;if("rgb"===a)return this.rgbToHex(o);if("hsl"===a)return this.rgbToHex(this.hslToRGB(o));break;case"rgb":if("rgb"===a)return o;if("hex"===a)return this.hexToRGB(o);if("hsl"===a)return this.hslToRGB(o);case"hsl":if("hsl"===a)return o;if("hex"===a)return this.rgbToHSL(this.hexToRGB(o));if("rgb"===a)return this.rgbToHSL(o);default:return o}return null},formatHex(e){switch(e.length){case 4:return`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`;case 7:return e;case 9:return e.substring(0,7);default:return null}},getRootVariables(e){const t=e.match(/:root,*[\s]*.*\{([^}]+)\}/);if(!t)return[];const n=t[1].match(/--[^:]+:[^;]+/g);return n?n.map((e=>{const[t,n]=e.split(":");return{name:t.trim(),value:n.trim()}})):[]}},te={formatName(e){const t=e.split(/[-_]/);for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].slice(1);return t.join(" ")}};function ne(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const oe=new o("Addon Manager"),ae=VelocityCore.modules.sucrase,ie=VelocityCore.modules.fs,ce=VelocityCore.modules.path,re=VelocityCore.modules.shell,le=VelocityCore.baseDir,se=X("config"),de=ce.join(le,"plugins"),ue=ce.join(le,"themes"),pe={plugins:new P,themes:new P};let me=Array.isArray(se.enabledPlugins)?new P(...se.enabledPlugins):new P,fe=Array.isArray(se.enabledThemes)?new P(...se.enabledThemes):new P;me.addListener((e=>{se.enabledPlugins=[...e]})),fe.addListener((e=>{se.enabledThemes=[...e]}));const he=()=>{ie.existsSync(de)||ie.mkdirSync(de),ie.existsSync(ue)||ie.mkdirSync(ue)},we=e=>e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),ge=()=>{he(),I("Reading Plugin Files",{type:"velocity"}),ie.readdir(de,((e,t)=>{e&&oe.error("Error reading plugin files",e);t.filter((e=>!e.includes("/")&&!e.includes("."))).forEach((e=>{if(!ie.existsSync(ce.join(de,e,"velocity_manifest.json")))return oe.error(`Plugin ${e} does not have a manifest file!`);try{const t=JSON.parse(ie.readFileSync(ce.join(de,e,"velocity_manifest.json"),"utf8"));let n={name:t.name,description:t.description,version:t.version,author:t.author,license:t.license,filePath:ce.join(de,e),social:{invite:ne([t,"access",e=>e.social,"optionalAccess",e=>e.invite]),website:ne([t,"access",e=>e.social,"optionalAccess",e=>e.website]),github:ne([t,"access",e=>e.social,"optionalAccess",e=>e.github]),donate:ne([t,"access",e=>e.social,"optionalAccess",e=>e.donate])},main:t.main,updates:t.updates,_type:"Plugins"};const o=ie.readFileSync(ce.join(de,e,n.main),"utf8"),a=ae.transform(o,{transforms:["jsx"],jsxPragma:"Velocity.WebpackModules.common.React.createElement",jsxFragmentPragma:"Velocity.WebpackModules.common.React.Fragment",production:!0}).code,i=new Function("Velocity","module","VelocityCore",`${a}; return module.exports//# sourceURL=velocity://${n.name}.js`)(Velocity,{exports:{}},VelocityCore);n.instance=new i(n),pe.plugins.insertNew(n),I(`Loaded ${n.name}`),ye.isEnabled(n.name)&&(ye.disable(n.name,!0),ye.enable(n.name))}catch(t){oe.error(`Error loading ${e}`,t),I(`Error loading ${e}`,{type:"error"})}}))}))},ye={get dir(){return de},get:e=>pe.plugins.find((t=>t.name===e)),getAll:()=>pe.plugins,isEnabled:e=>me.includes(e),getEnabled:()=>pe.plugins.filter((e=>ye.isEnabled(e.name))),enable:e=>{const t=pe.plugins.find((t=>t.name===e));if(t){try{me.includes(t.name)||me.insertNew(t.name),t.instance.onStart(),I(`Enabled ${t.name}`,{type:"success"})}catch(e){oe.error(`Error enabling plugin '${t.name}'.`,e),I(`Error enabling ${t.name}`,{type:"error"})}return!0}},disable:(e,t)=>{const n=pe.plugins.find((t=>t.name===e));if(n){try{me.activeFilter((t=>t!==e)),n.instance.onStop(),t||I(`Disabled ${n.name}`,{type:"success"})}catch(e){oe.error(`Error disabling plugin '${n.name}'.`,e),I(`Error disabling ${n.name}`,{type:"error"})}return!0}},unlink:e=>{const t=pe.plugins.find((t=>t.name===e));if(t){try{ye.disable(e,!0),pe.plugins.activeFilter((t=>t.name!==e)),I(`Unlinked ${t.name}`,{type:"success"})}catch(e){oe.error(`Error unlinking plugin '${t.name}'.`,e),I(`Error unlinking ${t.name}`,{type:"error"})}return!0}},delete:e=>{const t=pe.plugins.find((t=>t.name===e));if(t){try{ye.unlink(e),ie.rmSync(t.filePath,{recursive:!0}),I(`Deleted ${t.name}`,{type:"error"})}catch(e){oe.error(`Error deleting plugin '${t.name}'.`,e),I(`Error deleting ${t.name}`,{type:"error"})}return!0}},toggle:e=>{ye.isEnabled(e)?ye.disable(e):ye.enable(e)},openFolder:e=>{const t=pe.plugins.find((t=>t.name===e));t&&re.openPath(t.filePath)},openDir:()=>{re.openPath(de)},reload(){pe.plugins.length=0,Velocity.AddonManager.Registry.plugins.length=0,ge()}},ve=()=>{he(),I("Reading Theme Files",{type:"velocity"}),ie.readdir(ue,((e,t)=>{e&&oe.error("Error reading theme files",e);t.filter((e=>!e.includes("/")&&!e.includes("."))).forEach((e=>{if(!ie.existsSync(ce.join(ue,e,"velocity_manifest.json")))return oe.error(`Theme ${e} does not have a manifest file!`);try{const t=JSON.parse(ie.readFileSync(ce.join(ue,e,"velocity_manifest.json"),"utf8"));let n={name:t.name,description:t.description,version:t.version,author:t.author,license:t.license,filePath:ce.join(ue,e),social:{invite:ne([t,"access",e=>e.social,"optionalAccess",e=>e.invite]),website:ne([t,"access",e=>e.social,"optionalAccess",e=>e.website]),github:ne([t,"access",e=>e.social,"optionalAccess",e=>e.github]),donate:ne([t,"access",e=>e.social,"optionalAccess",e=>e.donate])},main:t.main,updates:t.updates,_type:"Themes"};const o=ie.readFileSync(ce.join(ue,e,n.main),"utf8");n.code=o;const a=ee.getRootVariables(o);a.length&&(n.instance={renderSettings:()=>a.map((e=>{const{name:t,value:n}=e;if(n.trim().startsWith("#"))try{return{default:Number(ee.formatHex(n.trim()).replace("#","0x")),id:t.replace("--","").trim(),name:te.formatName(t.replace("--","").trim()),note:`#${n.trim().replace("#","")}`,type:"color",action:e=>{const n=ee.formatHex(`#${e.toString(16)}`);document.body.style.setProperty(t,n)}}}catch(e){return null}return null})),settings:X(n.name)}),pe.themes.insertNew(n),I(`Loaded ${n.name}`),be.isEnabled(n.name)&&(be.disable(n.name,!0),be.enable(n.name))}catch(t){oe.error(`Error loading ${e}`,t),I(`Error loading ${e}`,{type:"error"})}}))}))},be={get dir(){return ue},get:e=>pe.themes.find((t=>t.name===e)),getAll:()=>pe.themes,isEnabled:e=>fe.includes(e),getEnabled:()=>pe.themes.filter((e=>be.isEnabled(e.name))),enable:e=>{const t=pe.themes.find((t=>t.name===e));if(t){try{fe.includes(t.name)||fe.insertNew(t.name);const e=document.createElement("style");if(e.id=`velocity-theme-${we(t.name)}`,e.innerHTML=t.code,v.appendChild(e),t.instance&&t.instance.settings)for(const[e,n]of Object.entries(G(t.name))){const t=ee.formatHex(`#${n.toString(16)}`);document.body.style.setProperty(`--${e}`,t)}I(`Enabled ${t.name}`,{type:"success"})}catch(e){oe.error(`Error enabling theme '${t.name}'.`,e),I(`Error enabling ${t.name}`,{type:"error"})}return!0}},disable:(e,t)=>{const n=pe.themes.find((t=>t.name===e));if(n){try{fe.activeFilter((t=>t!==e));const o=document.getElementById(`velocity-theme-${we(n.name)}`);if(o&&o.remove(),n.instance&&n.instance.settings)for(let[e,t]of Object.entries(G(n.name)))document.body.style.removeProperty(`--${e}`);t||I(`Disabled ${n.name}`,{type:"success"})}catch(e){oe.error(`Error disabling theme '${n.name}'.`,e),I(`Error disabling ${n.name}`,{type:"error"})}return!0}},unlink:e=>{const t=pe.themes.find((t=>t.name===e));if(t){try{be.disable(e,!0),pe.themes.activeFilter((t=>t.name!==e)),I(`Unlinked ${t.name}`,{type:"success"})}catch(e){oe.error(`Error unlinking theme '${t.name}'.`,e),I(`Error unlinking ${t.name}`,{type:"error"})}return!0}},delete:e=>{const t=pe.themes.find((t=>t.name===e));if(t){try{be.unlink(e),ie.rmSync(t.filePath,{recursive:!0}),I(`Deleted ${t.name}`,{type:"error"})}catch(e){oe.error(`Error deleting theme '${t.name}'.`,e),I(`Error deleting ${t.name}`,{type:"error"})}return!0}},toggle:e=>{be.isEnabled(e)?be.disable(e):be.enable(e)},openFolder:e=>{const t=pe.themes.find((t=>t.name===e));t&&re.openPath(t.filePath)},openDir:()=>{re.openPath(ue)},reload(){pe.themes.length=0,Velocity.AddonManager.Registry.themes.length=0,ve()}};var Ce=Object.freeze({__proto__:null,Registry:pe,enabledPlugins:me,enabledThemes:fe,initPlugins:ge,Plugins:ye,initThemes:ve,Themes:be});S("button-container",{".velocity-button-container":{display:"flex",gap:"5px"}});var Re=e=>{const{children:t}=e;return window.React.createElement("div",{className:"velocity-button-container"},t)};S("component-preview",{".velocity-component-preview":{backgroundColor:"var(--background-secondary)",color:"var(--header-primary)",marginBlock:"8px 10px",padding:"20px",borderRadius:"5px",fontSize:"16px",fontWeight:"500",display:"flex",width:"100%",zIndex:"1"}});var Ee=e=>{const{children:t}=e;return window.React.createElement("div",{className:"velocity-component-preview"},t)};const xe=VelocityCore.modules.fs,Se=VelocityCore.modules.path,Ae=new o("Addon Actions"),ke=async e=>{let t,n,o;try{t=new URL(e.endsWith("/")?e:e+"/"),n=new URL("velocity_manifest.json",t)}catch(e){return I("Invalid URL",{type:"error"})}try{const e=JSON.parse(await VelocityCore.request(n.href));o={manifest:e,main:await VelocityCore.request(new URL(e.main,t).href)}}catch(e){Ae.error("Failed to traverse addon paths:",e),I("Failed to traverse addon paths",{type:"error"})}return o},Ne=async(e,t)=>{const n=e.main.match(/require\("(.+)"\)/g);let o=[];if(n)for(const e of n){const n=e.match(/require\("(.+)"\)/)[1].replace(/\.\.\/plugins\/.*\//,""),a=new URL(n,t);o.push({url:a.href,path:n})}return o},je=async e=>{if(!e)return I("Invalid URL",{type:"error"});const t=await ke(e),n=t.manifest.main.endsWith(".js")?"Plugins":"Themes",o=Se.join(Ce[n].dir,t.manifest.name);if(Ae.log(`Installing ${n.substring(0,n.length-1)} from ${e}`),xe.existsSync(o))return Ae.error(`Addon already exists: '${t.manifest.name}'`),void I("Addon already exists",{type:"error"});if(xe.mkdirSync(o),xe.writeFileSync(Se.join(o,"velocity_manifest.json"),JSON.stringify(t.manifest)),xe.writeFileSync(Se.join(o,t.manifest.main),t.main),!t)return;return(await Ne(t,e)).forEach((async e=>{try{xe.writeFileSync(Se.join(o,e.path),await VelocityCore.request(e.url))}catch(e){Ae.error("Failed to install addon:",e),I(`Could not traverse imports for ${t.manifest.name}`,{type:"error"})}})),Ae.log(`Installed ${t.manifest.name}`),I(`Installed ${t.manifest.name}`,{type:"success"}),!0},Me=VelocityCore.modules.originalFs,Te=VelocityCore.modules.path,Le=new o("Updater"),Pe=class{constructor(e){this.type=e,this.state="idle",this.lastChecked=null,this.updatesAvailable=!1,this.updateInfo=null}fail(e){this.state="error",Le.error(`Failed to check for addon update: ${e}`),I("Failed to check for addon updates.","error")}async checkForUpdates(){this.lastChecked=Date.now(),this.state="checking",pe[this.type].forEach((e=>{if(e.updates)switch(typeof e.updates){case"string":this.checkForUpdatesFromUrl(e);break;case"object":this.checkForUpdatesFromObject(e)}})),this.state="idle"}async checkForUpdatesFromUrl(e){const t=await ke(e.updates);return t?(t.manifest.version!==e.version&&(this.updatesAvailable=!0,this.state="available",this.updateInfo={...this.updateInfo,[e.name]:t}),t):this.fail(`Failed to fetch update data for ${e.name}.`)}async checkForUpdatesFromObject(e){const{url:t}=e.updates,n=await ke(t);if(!n)return this.fail(`Failed to fetch update data for ${e.name}.`);n.manifest.version!==e.version&&(this.updatesAvailable=!0,this.state="available",this.updateInfo={...this.updateInfo,[e.name]:n})}async downloadUpdate(e){if(!this.updateInfo[e])return this.fail(`Failed to find update data for ${e}.`);const t=this.updateInfo[e],n=t.manifest.main.endsWith(".js")?"Plugins":"Themes",o=Te.join(Ce[n].dir,t.manifest.name);if(!Me.existsSync(o))return this.fail(`Failed to find addon directory for ${e}.`);const a=await Ne(t.manifest.main,t);return Me.writeFileSync(Te.join(o,"velocity_manifest.json"),JSON.stringify(t.manifest)),a.forEach((async e=>{Me.writeFileSync(Te.join(o,e.path),await VelocityCore.request(e.url))})),delete this.updateInfo[e],t}async downloadAllUpdates(){const e=Object.keys(this.updateInfo);for(const t of e)await this.downloadUpdate(t)}};var $e=Object.freeze({__proto__:null,injectCSS:(e,t)=>{let n=`velocity-style-${e.replace(/[^a-zA-Z0-9]/g,"-")}`;if(document.getElementById(n))return;let o=document.createElement("style");return o.id=n,o.innerHTML=t,g.appendChild(o),n},removeCSS:e=>{let t=`velocity-style-${e.replace(/[^a-zA-Z0-9]/g,"-")}`,n=document.getElementById(t);n&&n.remove()}});const Oe=new o("Patcher");class Ie{constructor(e){Ie.prototype.__init.call(this),this.id=e}__init(){this.patches=[]}_buildPatch(e,t,n,o){const a={type:e,module:t,method:n,options:o,id:this.id,revert:()=>{this.unpatch(t,n)},proxy:null,originalMethod:t[n]};a.proxy=this._buildProxy(a);const i=Object.getOwnPropertyDescriptor(t,n);if(i&&i.get){a.overWritten=!0;try{Object.defineProperty(t,n,{...i,configurable:!0,enumerable:!0,get:()=>a.proxy,set:e=>{a.originalMethod=e}})}catch(e){Oe.error("Failed to overwrite getter",e)}}else t[n]=a.proxy;return this.patches.push(a),a}_buildProxy(e){return function(){const{type:t,options:n,originalMethod:o}=e;let a=o.apply(this,arguments);switch(t){case"before":try{n.callback(arguments)}catch(e){Oe.error("Failed to call before patch",e)}case"instead":try{a=n.callback(arguments,o.bind(this))}catch(e){Oe.error("Failed to call instead patch",e)}case"after":try{n.callback(arguments,a)}catch(e){Oe.error("Failed to call after patch",e)}}return a}}unpatch(e,t){const n=this.patches.find((n=>n.module===e&&n.method===t));n&&(n.overWritten?Object.defineProperty(e,t,{...Object.getOwnPropertyDescriptor(e,t),get:()=>n.originalMethod,set:void 0}):e[t]=n.originalMethod,this.patches.splice(this.patches.indexOf(n),1))}unpatchAll(){this.patches.forEach((e=>{this.unpatch(e.module,e.method)}))}before(e,t,n,o){return this._buildPatch("before",e,t,{...o,callback:n})}instead(e,t,n,o){return this._buildPatch("instead",e,t,{...o,callback:n})}after(e,t,n,o){return this._buildPatch("after",e,t,{...o,callback:n})}}w.globalPromise.then((async()=>{window.React=await w.waitFor(["createElement","useEffect"]),window.ReactDOM=await w.waitFor(["render","hydrate"])}));var De={CoreUpdater:new class{constructor(){this.updateAvailable=!1,this.lastChecked=null,this.updateInfo=null,this.state="idle",this.endpoint="https://api.github.com/repos/Velocity-Discord/Velocity/releases"}fail(e){this.state="error",Le.error(`Failed to check for updates: ${e}`),_({title:"Update Failed",content:e,type:"error"})}async checkForUpdates(){let e,t;this.lastChecked=Date.now(),this.state="checking";try{e=await VelocityCore.request(this.endpoint+"/latest",{headers:{"User-Agent":"Velocity-Discord"}}),t=JSON.parse(e)}catch(e){return this.fail(`Failed to fetch latest release. ${e}`)}const n={version:t.name.replace("[Release] ","").replace(/^v/,""),tag_name:t.tag_name,name:t.name,notes:t.body,asar:t.assets.find((e=>e.name.endsWith(".asar"))),timestamp:new Date(t.published_at)};return n.asar?(this.updateInfo=n,this.state="available",n.version!==VelocityCore.Meta.version&&(this.updateAvailable=!0,_({title:"Update Available",content:"A new update is available! Click here to download it.",buttons:[{label:"Download",action:()=>{this.downloadUpdate()}}]})),n):this.fail("Failed to find asar in latest release.")}async downloadUpdate(){const{asar:e}=this.updateInfo;VelocityCore.request(e.browser_download_url,((e,t,n)=>{if(e)return this.fail("Failed to get asar data.");const o=Te.join(VelocityCore.baseDir,"dist/velocity.asar");try{Me.writeFileSync(o,n),_({title:"Update Downloaded",content:"Velocity has been updated. Please relaunch Velocity to apply the update.",buttons:[{label:"Relaunch",action:()=>{DiscordNative.app.relaunch()}}]}),this.state="no-updates"}catch(e){this.fail("Failed to write asar to disk.")}}))}},ThemeUpdater:new Pe("themes"),PluginUpdater:new Pe("plugins"),Plugin:class{constructor(e){this.manifest=e,this.settings=G(e.name)}onStart(){}onStop(){}},Styling:$e,Patcher:Ie,DataStore:Q,Logger:o,AddonManager:{...Ce,installAddon:je},WebpackModules:w,Notifications:{showNotification:_,showToast:I,showConfirmationModal:B},Utilities:{waitUntil:t}};const{WebpackModules:Fe,AddonManager:_e}=De;S("addon-header",{".velocity-addon-header":{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"5px",marginBottom:"15px"},".addon-searchbar":{width:"100%",height:"32px",background:"var(--background-tertiary)",borderRadius:"4px",padding:"0 10px",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"10px"},".addon-searchbar input":{width:"100%",height:"100%",background:"transparent",border:"none",color:"var(--text-normal)",fontSize:"14px",fontWeight:"500"},".addon-searchbar svg":{width:"20px",height:"20px"},".addon-buttons":{display:"flex",alignItems:"center"}});var Be=e=>{const{type:t,onSearch:n}=e,[o,a]=React.useState(""),i="plugins"===t?"Plugins":"Themes",{Components:c,Icons:r}=Fe.common,l=c.PanelButton.default;return window.React.createElement("div",{className:"velocity-addon-header"},window.React.createElement("div",{onContextMenu:e=>{L(e,[{label:"Install from URL",action:()=>{_e.installAddon(o)}}])},className:"addon-searchbar"},window.React.createElement("input",{onChange:e=>{a(e),n(e)},placeholder:"Search..."}),window.React.createElement(r.Search.default,null)),window.React.createElement("div",{className:"addon-buttons"},window.React.createElement(l,{tooltipText:`Open ${"themes"==t?"Theme":"Plugin"} Folder`,icon:r.Folder.default,onClick:()=>_e[i].openDir()}),window.React.createElement(l,{tooltipText:`Reload ${i}`,icon:r.Retry.default,onClick:()=>_e[i].reload()})))},Ve=e=>{const{children:t,tag:n,className:o,style:a}=e,i=w.find(["h1","title"]),c={style:a,className:`${i.defaultColor} ${i[n]} ${i[`defaultMargin${n}`]} ${o}`};switch(n){case"h1":default:return window.React.createElement("h1",{...c},t);case"h2":return window.React.createElement("h2",{...c},t);case"h3":return window.React.createElement("h3",{...c},t);case"h4":return window.React.createElement("h4",{...c},t);case"h5":return window.React.createElement("h5",{...c},t);case"h6":return window.React.createElement("h6",{...c},t)}},Ue=e=>window.React.createElement("div",{className:`velocity-setting ${e.className||""}`},e.children);S("color-setting",{".velocity-color-setting":{display:"flex",justifyContent:"space-between"}});var ze=e=>{const{Components:t}=w.common,{default:n}=t.TooltipContainer,o=t.FormText.default,a=t.ColorPickerModules,i=t.Popout.default,c=function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([a,"optionalAccess",e=>e.CustomColorButton,"access",e=>e.prototype,"access",e=>e.render,"access",e=>e.call,"call",e=>e({props:{}}),"access",e=>e.type]),{name:r,note:l,setting:s,action:d,defaultColor:u,palette:p=[],container:m="config"}=e,f=X(m),[h,g]=React.useState(f[s]),y=()=>window.React.createElement(a.CustomColorPicker,{value:h,onChange:e=>{"function"==typeof d&&d(e),f[s]=e,g(e)}});return window.React.createElement(Ue,{className:"velocity-color-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(Ve,{tag:"h3",style:{margin:"0"}},r),window.React.createElement(o,{type:"description"},l)),window.React.createElement(a.default,{className:"velocity-color-picker",value:h,colors:p,onChange:e=>{"function"==typeof d&&d(e),g(e),f[s]=e},renderDefaultButton:()=>window.React.createElement(n,{position:"bottom",text:"Default",children:e=>window.React.createElement(a.DefaultColorButton,{...e,color:u,onChange:()=>{"function"==typeof d&&d(u),g(u),f[s]=u}})}),renderCustomButton:()=>window.React.createElement(i,{renderPopout:y,animation:"translate",align:"center",position:"top",children:e=>window.React.createElement(n,{position:"bottom",text:"Pick a Color",children:t=>window.React.createElement("div",{...t,...e,className:"color-button"},window.React.createElement(c,{isCustom:!0,color:h}))})})}))},He=e=>{const{Components:t}=w.common,n=t.SwitchItem.default,{name:o,note:a,setting:i,action:c,container:r="config"}=e,l=X(r),[s,d]=React.useState(l[i]);return window.React.createElement(Ue,{className:"velocity-switch-setting"},window.React.createElement(n,{note:a,value:s,onChange:e=>{"function"==typeof c&&c(e),l[i]=e,d(e)}},o))},We=e=>{const{Components:t}=w.common,n=t.FormText.default,o=t.Slider.default,{name:a,note:i,setting:c,action:r,disabled:l=!1,minValue:s=0,maxValue:d=100,handleSize:u=10,units:p="",container:m="config",stickToMarkers:f}=e,h=X(m),[g,y]=React.useState(h[c]);let v=e=>`${Math.round(e)}`,b=e=>`${Math.round(e)}`;if(p){const e=e=>`${Math.round(e)}${p}`;v=e,b=e}return window.React.createElement(Ue,{className:"velocity-slider-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(Ve,{tag:"h3",style:{margin:"0"}},a),window.React.createElement(n,{type:"description"},i)),window.React.createElement(o,{onValueChange:e=>{"function"==typeof r&&r(e),h[c]=e,y(e)},value:g,disabled:l,minValue:s,maxValue:d,handleSize:u,initialValue:g,onMarkerRender:v,onValueRender:b,stickToMarkers:f}))},Ze=e=>{const{Components:t}=w.common,n=t.FormText.default,o=t.TextInput.default,{name:a,note:i,setting:c,action:r,disabled:l,maxLength:s,type:d,placeholder:u,container:p="config"}=e,m=X(p),[f,h]=React.useState(m[c]);return window.React.createElement(Ue,{className:"velocity-textinput-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(Ve,{tag:"h3",style:{margin:"0"}},a),window.React.createElement(n,{type:"description"},i)),window.React.createElement(o,{value:f,onChange:e=>{"function"==typeof r&&r(e),m[c]=e,h(e)},disabled:l,maxLength:s,type:d,placeholder:u}))};function Ge(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const{WebpackModules:qe,AddonManager:Ye}=De;S("addon-card",{".velocity-addon-card":{display:"flex",flexDirection:"column",width:"100%",gap:"10px",padding:"15px",borderRadius:"5px",backgroundColor:"var(--background-secondary)",marginBottom:"10px"},".addon-card-header":{display:"flex",alignItems:"center",justifyContent:"space-between",color:"var(--text-normal)",cursor:"pointer"},".addon-card-header-left":{display:"flex",gap:"5px",alignItems:"flex-end"},".addon-card-header-title":{fontSize:"20px",fontWeight:"500",color:"var(--header-primary)"},".addon-card-header-subtitle":{fontSize:"14px",fontWeight:"400",color:"var(--header-secondary)"},".addon-card-lower":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",gap:"10px"},".addon-card-description":{fontSize:"14px",fontWeight:"400"},".addon-card-footer":{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"5px"},".addon-card-footer > span > button":{width:"32px !important"},".addon-card-settings-header":{display:"flex",alignItems:"center",color:"var(--text-normal)",cursor:"pointer",marginBottom:"10px",gap:"5px"},".addon-card-settings-header svg:hover":{color:"var(--interactive-hover)"}});var Je=e=>{const{Components:t,Icons:n}=qe.common,o=t.Switch.default,a=t.Markdown.default,i=t.PanelButton.default,{name:c,description:r,version:l,author:s,license:d,social:u,_type:p}=e,[m,f]=React.useState(Ye[p].isEnabled(c)),[h,w]=React.useState(!1);return window.React.createElement("div",{className:"velocity-addon-card"},window.React.createElement("div",{className:"addon-card-header",onClick:()=>{Ye[p].toggle(c),f(!m),w(!1)},onContextMenu:e=>{L(e,[{label:"Enable",type:"check",checked:m,onChange:e=>{Ye[p].toggle(c),f(e)}},{type:"separator"},{label:"Unlink",action:()=>{Ye[p].unlink(c)},icon:n.Trash.default,color:"Danger"}])}},window.React.createElement("div",{className:"addon-card-header-left"},window.React.createElement("div",{className:"addon-card-header-title"},c),window.React.createElement("div",{className:"addon-card-header-subtitle"},l," by ","string"==typeof s?s:s.name)),window.React.createElement("div",{className:"addon-card-header-right"},window.React.createElement(o,{checked:m}))),window.React.createElement("div",{className:"addon-card-lower"},window.React.createElement("div",{className:"addon-card-description"},window.React.createElement(a,null,r)),window.React.createElement("div",{className:"addon-card-footer"},Ge([e,"access",e=>e.instance,"optionalAccess",e=>e.renderSettings])&&window.React.createElement(i,{disabled:!m,tooltipText:"Settings",innerClassName:"addon-card-panelbutton",icon:n.Gear.default,onClick:()=>{w(!h)}}),(Ge([u,"optionalAccess",e=>e.invite])||Ge([u,"optionalAccess",e=>e.github])||Ge([u,"optionalAccess",e=>e.website])||Ge([u,"optionalAccess",e=>e.donate]))&&window.React.createElement(i,{tooltipText:"Social",icon:n.Link.default,onClick:e=>{L(e,[u.invite&&{label:"Invite",action:()=>{window.open(new URL(u.invite,"https://discord.gg/").href)}},u.github&&{label:"GitHub",action:()=>{window.open(new URL(u.github).href)}},u.website&&{label:"Website",action:()=>{window.open(new URL(u.website).href)}},u.donate&&{label:"Donate",action:()=>{window.open(new URL(u.donate).href)}}])}}),window.React.createElement(i,{tooltipText:"Open Folder",innerClassName:"addon-card-panelbutton",icon:n.Folder.default,onClick:()=>{Ye[p].openFolder(c)}}),window.React.createElement(i,{tooltipText:"Unlink",innerClassName:"addon-card-panelbutton",icon:n.Trash.default,onClick:()=>{Ye[p].unlink(c)}}))),h&&m&&window.React.createElement("div",{className:"addon-card-settings"},window.React.createElement("div",{className:"addon-card-settings-header"},window.React.createElement("svg",{width:"12",height:"12",viewBox:"0 0 24 24",onClick:()=>{w(!1)}},window.React.createElement("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})),window.React.createElement(Ve,{style:{marginBottom:"0"},tag:"h5"},"Settings")),Ge([e,"access",e=>e.instance,"optionalAccess",e=>e.renderSettings])&&e.instance.renderSettings().map((t=>{if(!t)return null;try{const n=n=>{"function"==typeof t.action&&t.action(n),e.instance.settings[t.id]=n};switch(t.type){case"switch":return window.React.createElement(He,{container:c,setting:t.id,name:t.name,note:t.note,action:n});case"slider":return window.React.createElement(We,{container:c,setting:t.id,name:t.name,note:t.note,minValue:0|t.min,maxValue:100|t.max,units:""|t.units,handleSize:10|t.handleSize,action:n});case"text":return window.React.createElement(Ze,{container:c,setting:t.id,name:t.name,note:t.note,action:n});case"color":return window.React.createElement(ze,{container:c,defaultColor:t.default,setting:t.id,name:t.name,note:t.note,action:n})}}catch(e){I("Error rendering settings for "+c,{type:"error"})}}))))},Ke=e=>{const{title:t,children:n}=e;return[window.React.createElement(Ve,{tag:"h1"},t),n]},Xe=e=>{const{type:t="right",width:n=24,height:o=24,style:a}=e;switch(t){case"down":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M10.59 2.59 6 7.17 1.41 2.59 0 4 6 10 12 4 10.59 2.59Z"}));case"up":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M1.41 9.41 6 4.83 10.59 9.41 12 8 6 2 0 8 1.41 9.41Z"}));case"left":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M9.41 1.41 4.83 6 9.41 10.59 8 12 2 6 8 0 9.41 1.41Z"}));case"right":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M2.59 10.59 7.17 6 2.59 1.41 4 0 10 6 4 12 2.59 10.59Z"}))}};S("setting-section",{".velocity-setting-section":{display:"flex",color:"var(--header-secondary)",alignItems:"center",gap:"5px"},".velocity-setting-section svg":{transition:"all 0.2s ease"},".velocity-setting:not(.velocity-switch-setting)":{paddingBlock:"15px",borderBottom:"thin solid var(--background-modifier-accent)"},".velocity-switch-setting":{paddingTop:"15px"},".velocity-setting:not(.velocity-switch-setting):last-child":{borderBottom:"none",paddingBottom:"0"}});var Qe=e=>{const{title:t,children:n,collapsable:o=!0}=e,[a,i]=React.useState(!1);return[window.React.createElement("div",{className:"velocity-setting-section",onClick:()=>{i(!a)}},o&&window.React.createElement(Xe,{type:"right",width:12,height:12,style:{transform:`rotate(${a?0:90}deg)`}}),window.React.createElement(Ve,{tag:"h5",style:{margin:"0"}},t)),a?null:n]};const et=(e,t)=>{let n=[];switch(typeof t){case"string":e.map((e=>{e.name&&e.description&&e.author&&(e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||e.author.name.toLowerCase().includes(t.toLowerCase()))&&n.push(e)}));break;case"object":e.map((e=>{e.name&&e.description&&e.author&&(e.name.toLowerCase().includes(t.target.value.toLowerCase())||e.description.toLowerCase().includes(t.target.value.toLowerCase())||e.author.name.toLowerCase().includes(t.target.value.toLowerCase()))&&n.push(e)}))}return n},{WebpackModules:tt}=De;S("empty-state",{".velocity-empty-state-huge > div:first-child":{height:"186px"},".velocity-empty-state-tiny > div:first-child":{height:"60px"}});var nt=e=>{const{Components:t}=tt.common,n=t.EmptyState.default,{artURL:o="",header:a="",description:i="",size:c="huge",CTAAction:r,CTALabel:l}=e;return window.React.createElement(n,{className:`velocity-empty-state-${c}`,size:c,artURL:o,header:a,description:i,onCTAClick:r,callToAction:l})};const{CoreUpdater:ot,ThemeUpdater:at,PluginUpdater:it,WebpackModules:ct,AddonManager:rt}=De;S("updater",{".velocity-updater":{display:"flex",flexDirection:"column"},".velocity-updater-banner":{backgroundColor:"var(--background-secondary)",borderRadius:"5px",padding:"12px",display:"flex",gap:"10px",marginBottom:"20px"},".velocity-updater .velocity-setting-section + .velocity-setting-section":{marginTop:"12px"},".velocity-updater-indicator":{display:"flex",alignItems:"center",justifyContent:"center",aspectRatio:"1",height:"100px",borderRadius:"3px",backgroundColor:"var(--background-primary)"},".velocity-updater-buttons":{display:"flex",gap:"5px",marginTop:"auto"},".velocity-updater-icon":{fill:"currentColor",width:"100%",height:"100%"},".velocity-updater-icon.available":{color:"#5B88FC"},".velocity-updater-icon.no-updates":{color:"#43B581"},".velocity-updater-icon.error":{color:"#F04747"},".velocity-updater-icon.checking":{color:"#FAA61A"},".velocity-updater-icon.check":{color:"#43B581"},".velocity-updater-icon.idle":{color:"var(--text-muted)"},".velocity-updater-content":{display:"flex",flexDirection:"column",gap:"5px"},".velocity-updater-title":{fontSize:"18px",fontWeight:"500",color:"var(--header-primary)"},".velocity-updater-subtitle":{fontSize:"14px",fontWeight:"400",color:"var(--text-normal)",display:"flex",gap:"3px"},".velocity-updater-subtitle .velocity-updater-timestamp":{backgroundColor:"var(--background-modifier-accent)",borderRadius:"3px",padding:"0 2px"},".velocity-updater-addons":{marginBottom:"12px",display:"flex",flexDirection:"column"},".velocity-updater-empty":{display:"flex",alignItems:"center",marginBottom:"12px",gap:"5px"},".velocity-updater-addon":{backgroundColor:"var(--background-secondary)",borderRadius:"5px",padding:"12px",display:"flex",gap:"10px",marginTop:"5px",justifyContent:"space-between"},".velocity-updater-addon-info":{display:"flex",flexDirection:"column",gap:"5px"},".velocity-updater-addon-title":{fontSize:"16px",fontWeight:"500",color:"var(--header-primary)"},".velocity-updater-addon-diff":{fontSize:"14px",fontWeight:"400",color:"var(--text-normal)"}});const lt=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon available",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"})),st=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon no-updates",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"})),dt=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon checking",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),ut=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon error",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"})),pt=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon idle",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M9.27,4.49c-1.63,7.54,3.75,12.41,7.66,13.8C15.54,19.38,13.81,20,12,20c-4.41,0-8-3.59-8-8C4,8.55,6.2,5.6,9.27,4.49 M11.99,2.01C6.4,2.01,2,6.54,2,12c0,5.52,4.48,10,10,10c3.71,0,6.93-2.02,8.66-5.02c-7.51-0.25-12.09-8.43-8.32-14.97 C12.22,2.01,12.11,2.01,11.99,2.01L11.99,2.01z"}));var mt=()=>{const{Components:e}=ct.common,t=(()=>{const[e,t]=React.useState(0);return()=>t((e=>e+1))})(),{state:n,updateInfo:o,updateAvailable:a,lastChecked:i}=ot,c="checking"===n?dt():"available"===n?lt():"no-updates"===n?st():"error"===n?ut():pt(),r="checking"===n?"Checking for updates...":"available"===n?"Update available":"no-updates"===n?"No updates available":"error"===n?"An Error Occurred!":"Idle",l=((e,t=Date.now())=>{const n=[["year",31536e6],["month",2628e6],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]],o=t-e;for(const[e,t]of n){if(o>=t){const n=Math.floor(o/t);return`${n} ${e}${1===n?"":"s"} ago`}if("second"===e)return"just now"}})(i);e.FormText.default;const s=e.ButtonModules,d=e.TooltipContainer.default,u={...it.updateInfo,...at.updateInfo},p=new Date(i);return window.React.createElement("div",{className:"velocity-updater"},window.React.createElement("div",{className:"velocity-updater-banner"},window.React.createElement("div",{className:"velocity-updater-indicator"},c),window.React.createElement("div",{className:"velocity-updater-content"},window.React.createElement("div",{className:"velocity-updater-title"},r),window.React.createElement("div",{className:"velocity-updater-subtitle"},"available"===n?`Version ${o.version} is available`:["Last checked",window.React.createElement(d,{text:p.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),children:e=>window.React.createElement("div",{...e,className:"velocity-updater-timestamp"},l)})]),window.React.createElement("div",{className:"velocity-updater-buttons"},"available"===n?window.React.createElement(s.default,{color:s.ButtonColors.GREEN,onClick:()=>{ot.downloadUpdate(),t()}},"Update"):window.React.createElement(s.default,{color:s.ButtonColors.BRAND,onClick:async()=>{await ot.checkForUpdates(),await it.checkForUpdates(),await at.checkForUpdates(),t()}},"Check for updates")))),window.React.createElement(Qe,{title:"Addons"},window.React.createElement("div",{className:"velocity-updater-"+(Object.keys(u||{}).length?"addons":"empty")},function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([Object,"access",e=>e.keys,"call",e=>e(u||{}),"optionalAccess",e=>e.length])?Object.keys(u).map((e=>window.React.createElement("div",{className:"velocity-updater-addon"},window.React.createElement("div",{className:"velocity-updater-addon-info"},window.React.createElement("div",{className:"velocity-updater-addon-title"},e),window.React.createElement("div",{className:"velocity-updater-addon-diff"},u[e].manifest.main.endsWith(".js")?rt.Plugins.get(e).version:rt.Themes.get(e).version," > ",u[e].manifest.version)),window.React.createElement("div",{className:"velocity-updater-addon-buttons"},window.React.createElement(s.default,{color:s.ButtonColors.GREEN,onClick:()=>{(u[e].manifest.main.endsWith(".js")?it:at).downloadUpdate(e),t()}},"Update"))))):window.React.createElement(nt,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any addon updates",description:"Now go and enjoy your day!"}))))};const ft=X("config"),ht=new o("Snippets"),wt=VelocityCore.modules.sucrase,gt=e=>{ft.editorTabs.forEach((t=>{switch(function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([t,"optionalAccess",e=>e.language])){case"js":if("css"==e)return;try{const e=wt.transform(t.content,{transforms:["jsx"]}).code;new Function("Velocity","VelocityCore",e)(Velocity,VelocityCore)}catch(e){I(`Error running snippet '${t.name}'`,{type:"error"}),ht.error(`Error running snippet '${t.name}'.`,e)}break;case"css":if("js"==e)return;const n=document.createElement("style");n.setAttribute("id",`velocity-snippet-${t.name}-style`),n.innerHTML=t.content,b.appendChild(n)}}))};function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}function kt(e){return function t(){for(var n=this,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return t.apply(n,[].concat(a,o))}}}function Nt(e){return{}.toString.call(e).includes("Object")}function jt(e){return"function"==typeof e}var Mt=kt((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),Tt={changes:function(e,t){return Nt(t)||Mt("changeType"),Object.keys(t).some((function(t){return n=e,o=t,!Object.prototype.hasOwnProperty.call(n,o);var n,o}))&&Mt("changeField"),t},selector:function(e){jt(e)||Mt("selectorType")},handler:function(e){jt(e)||Nt(e)||Mt("handlerType"),Nt(e)&&Object.values(e).some((function(e){return!jt(e)}))&&Mt("handlersType")},initial:function(e){var t;e||Mt("initialIsRequired"),Nt(e)||Mt("initialType"),t=e,Object.keys(t).length||Mt("initialContent")}};function Lt(e,t){return jt(t)?t(e.current):t}function Pt(e,t){return e.current=St(St({},e.current),t),t}function $t(e,t,n){return jt(t)?t(e.current):Object.keys(n).forEach((function(n){var o;return null===(o=t[n])||void 0===o?void 0:o.call(t,e.current[n])})),n}var Ot={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Tt.initial(e),Tt.handler(t);var n={current:e},o=kt($t)(n,t),a=kt(Pt)(n),i=kt(Tt.changes)(e),c=kt(Lt)(n);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return Tt.selector(e),e(n.current)}function l(e){At(o,a,i,c)(e)}return[r,l]}};var It,Dt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},Ft=(It=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=It.length?It.apply(this,o):function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e.apply(t,[].concat(o,a))}})(Dt),_t={config:function(e){var t;return e||Ft("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||Ft("configType"),e.urls?(console.warn(Dt.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function Bt(e,t){return Object.keys(t).forEach((function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Bt(e[n],t[n]))})),bt(bt({},e),t)}var Vt={type:"cancelation",msg:"operation is manually canceled"};function Ut(e){var t=!1,n=new Promise((function(n,o){e.then((function(e){return t?o(Vt):n(e)})),e.catch(o)}));return n.cancel=function(){return t=!0},n}var zt,Ht,Wt=Ot.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),Zt=(Ht=2,function(e){if(Array.isArray(e))return e}(zt=Wt)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var c,r=e[Symbol.iterator]();!(o=(c=r.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return n}}(zt,Ht)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(zt,Ht)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Gt=Zt[0],qt=Zt[1];function Yt(e){return document.body.appendChild(e)}function Jt(e){var t,n,o=Gt((function(e){return{config:e.config,reject:e.reject}})),a=(t="".concat(o.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return a.onload=function(){return e()},a.onerror=o.reject,a}function Kt(){var e=Gt((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){Xt(t),e.resolve(t)}),(function(t){e.reject(t)}))}function Xt(e){Gt().monaco||qt({monaco:e})}var Qt=new Promise((function(e,t){return qt({resolve:e,reject:t})})),en={config:function(e){var t=_t.config(e),n=t.monaco,o=Ct(t,["monaco"]);qt((function(e){return{config:Bt(e.config,o),monaco:n}}))},init:function(){var e=Gt((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(qt({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Ut(Qt);if(window.monaco&&window.monaco.editor)return Xt(window.monaco),e.resolve(window.monaco),Ut(Qt);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(Yt,Jt)(Kt)}return Ut(Qt)},__getMonacoInstance:function(){return Gt((function(e){return e.monaco}))}},tn=e=>{const{options:t,value:n,onChange:o}=e,{Components:a,Classes:i}=w.common,[c,r]=React.useState(n||0),l=a.VarientText.x,s=i.RadioItems,d=i.Position;return window.React.createElement("div",{className:"radio-group",role:"radiogroup",style:{textAlign:"left"}},t.map(((e,n)=>window.React.createElement("div",{className:`${s.item} ${d.directionRow} ${s.itemFilled}`,role:"radio",tabindex:n,"aria-checked":c==n,onClick:()=>{r(n),o(t[n].value)}},window.React.createElement("div",{className:s.radioBar,style:{padding:"10px"}},window.React.createElement("div",null,window.React.createElement("svg",{"aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),c==n&&window.React.createElement("circle",{cx:"12",cy:"12",r:"5",className:s.radioIconForeground,fill:"currentColor"}))),window.React.createElement("div",{className:s.info},window.React.createElement(l,{color:"none",variant:"text-md/medium"},e.name)))))))};function nn(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const on=X("config"),an=VelocityCore.modules.fs,cn=VelocityCore.modules.path,rn=VelocityCore.baseDir,{WebpackModules:ln}=De,sn=an.readFileSync(cn.join(rn,"index.d.ts"),"utf8");let dn;S("editor",{".velocity-editor-modal-body":{display:"flex",flexDirection:"column",alignItems:"flex-start"},".velocity-editor-modal-body > div":{width:"100%"},".velocity-editor":{backgroundColor:"var(--background-secondary)",borderRadius:"4px",width:"100%",height:"600px",display:"flex",overflow:"hidden",flexDirection:"column"},".editor-header":{display:"flex",height:"40px",alignItems:"center",justifyContent:"space-between",padding:"24px 10px"},".editor-header-buttons":{display:"flex",gap:"5px"},".editor-body":{width:"100%",height:"100%",display:"flex"},".editor-sidebar":{width:"200px",height:"100%",backgroundColor:"var(--background-secondary-alt)",display:"flex",flexDirection:"column",gap:"5px",padding:"10px",overflow:"auto"},".editor-sidebar-tab":{color:"var(--text-normal)",display:"flex",alignItems:"center",gap:"10px",padding:"8px 10px",borderRadius:"4px",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},".editor-sidebar-tab:hover":{backgroundColor:"var(--background-modifier-hover)"},".editor-sidebar-tab.active":{backgroundColor:"var(--background-modifier-active)"},"#editor-container":{height:"100%",width:"100%"}}),on.editorTabs||(on.editorTabs=[]);const un=new P(...on.editorTabs);new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e)})).then((()=>{en.init().then((e=>{dn=e,window.monaco=dn,dn.languages.typescript.javascriptDefaults.addExtraLib(sn,"velocity.d.ts"),dn.editor.create(document.getElementById("editor-container"),{})}))}));var pn=e=>{const{Components:t,Icons:n,Actions:o}=ln.common,[a,i]=React.useState(0),[c,r]=React.useState(un);React.useEffect((()=>(window.editor=dn.editor.create(document.getElementById("editor-container"),{value:l?nn([l,"optionalAccess",e=>e.content]):"/* No File Selected. */\n/* Select a file from the sidebar to edit it. */",language:l?"js"==nn([l,"optionalAccess",e=>e.language])?"javascript":"css":"javascript",theme:"vs-dark",minimap:{enabled:!1}}),window.editor.onDidChangeModelContent((e=>{if(l){if(!1!==nn([e,"access",e=>e.changes,"optionalAccess",e=>e[0],"optionalAccess",e=>e.forceMoveMarkers]))return;un.splice(a,1,{...un[a],content:window.editor.getValue()})}b.querySelectorAll("style[id^='velocity-snippet-'][id$='-style']").forEach((e=>e.remove())),gt("css")})),()=>{window.editor.dispose()}))),un.addListener((e=>{r(e),on.editorTabs=e}));let l=on.editorTabs[a];const s=t.PanelButton.default,d=t.TextInput.default,u=o.ModalActions,p=t.Alert.default;return window.React.createElement("div",{className:"velocity-editor"},window.React.createElement("div",{className:"editor-header"},window.React.createElement(Ve,{tag:"h5",style:{margin:"0"}},l?`${nn([l,"optionalAccess",e=>e.name])}.${nn([l,"optionalAccess",e=>e.language])}`:"None Selected"),window.React.createElement("div",{className:"editor-header-buttons"},"js"==nn([l,"optionalAccess",e=>e.language])&&window.React.createElement(s,{tooltipText:"Run",icon:n.Play.default,onClick:()=>{gt("js")}}),window.React.createElement(s,{tooltipText:"New File",icon:n.Plus.default,onClick:()=>{let e="",t="js";u.openModal((n=>window.React.createElement(p,{...n,title:"New File",body:window.React.createElement("div",{className:"velocity-editor-modal-body"},window.React.createElement(Ve,{tag:"h5"},"Name"),window.React.createElement(d,{style:{marginBottom:"10px"},onChange:t=>{e=t},placeholder:"Name"}),window.React.createElement(Ve,{tag:"h5"},"Language"),window.React.createElement(tn,{options:[{name:"JavaScript",value:"js"},{name:"CSS",value:"css"}],value:t,onChange:e=>{t=e}})),onConfirm:()=>e?["js","css"].includes(t)?(un.push({name:e,language:t,content:""}),i(un.length-1),window.editor.setValue(nn([l,"optionalAccess",e=>e.content])||""),dn.editor.setModelLanguage(window.editor.getModel(),"js"==nn([l,"optionalAccess",e=>e.language])?"javascript":"css"),void(l=on.editorTabs[a])):I("Invalid language.",{type:"error"}):I("Name cannot be empty.",{type:"error"})})))}}),window.React.createElement(s,{tooltipText:"Options",icon:n.Gear.default,onClick:()=>{if(!l)return I("No File Selected",{type:"error"});let e=l.name;u.openModal((t=>window.React.createElement(p,{...t,title:"Options",body:window.React.createElement("div",{className:"velocity-editor-modal-body"},window.React.createElement(Ve,{tag:"h5"},"Name"),window.React.createElement(d,{onChange:t=>{e=t},placeholder:"Name"})),onConfirm:()=>{e&&(un.splice(a,1,{name:e,language:nn([l,"optionalAccess",e=>e.language]),content:nn([l,"optionalAccess",e=>e.content])}),i(un.findIndex((t=>t.name==e))),window.editor.setValue(nn([l,"optionalAccess",e=>e.content])||""),dn.editor.setModelLanguage(window.editor.getModel(),"js"==nn([l,"optionalAccess",e=>e.language])?"javascript":"css"),l=on.editorTabs[a])}})))}}),window.React.createElement(s,{tooltipText:"Delete File",icon:n.Trash.default,onClick:()=>{if(!l)return I("No File Selected",{type:"error"});un.activeFilter(((e,t)=>t!==a)),i(0),r(un)}}))),window.React.createElement("div",{className:"editor-body"},window.React.createElement("div",{className:"editor-sidebar"},c.map(((e,t)=>window.React.createElement("div",{key:t,className:"editor-sidebar-tab "+(t==a?"active":""),onClick:()=>{i(t),editor.setValue(e.content),dn.editor.setModelLanguage(window.editor.getModel(),"js"==nn([l,"optionalAccess",e=>e.language])?"javascript":"css"),l=on.editorTabs[a]}},nn([e,"optionalAccess",e=>e.name]),".",nn([e,"optionalAccess",e=>e.language]))))),window.React.createElement("div",{id:"editor-container"})))},mn="velocity:handle-kill";const fn=X("config"),hn=(e,t)=>{E.style.setProperty(e,t)};function wn(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const gn=VelocityCore.modules.ipcRenderer;new o("Settings");const yn=X("config");var vn={get websockets(){return DiscordNative.nativeModules.requireModule("discord_rpc").RPCWebSocket.ws},init(){this.socket=new this.websockets.Server({port:1842}),this.socket.on("connection",(e=>{let t=!1;const n=_({title:"New Socket Connection",content:"A new socket connection has been established.",buttons:[{label:"Okay",action:()=>{n(),t=!0}},{label:"Disconnect",color:"RED",action:()=>{e.close(),n()}}]});e.on("message",(n=>{switch(n){case"velocity:get-client-data":e.send("velocity:data"+JSON.stringify({platform:DiscordNative.process.platform,version:DiscordNative.app.getVersion(),channel:DiscordNative.app.getReleaseChannel()}));break;case"velocity:reload":t&&location.reload();break;case"velocity:relaunch":t&&DiscordNative.app.relaunch()}if(n.startsWith("velocity:install-addon")){DiscordNative.window.focus();const e=n.split("|")[1],t=n.split("|")[2];e&&B({title:`Install ${t||"Addon"}?`,content:"Are you sure you want to install this addon? Addons can be dangerous and can break your Discord client.",confirmText:"Install",danger:!0,onConfirm:()=>{je(e)}})}}))}))}};const bn=X("config"),Cn=new o("Renderer");(async()=>{const e=Date.now();Cn.log("Initialising..."),await w.globalPromise,window.Velocity=De,Object.freeze(window.Velocity),Cn.log(`API Added in ${Date.now()-e}ms`),window.DiscordSentry&&bn.KillSentry&&(window.DiscordSentry.getCurrentHub().getClient().close(),Cn.log("Killed Sentry")),bn.StopWarnings&&(DiscordNative.window.setDevtoolsCallbacks(null,null),Cn.log("Disabled Devtools Warnings")),vn.init(),Cn.log("Socket Initialised"),(()=>{const e=ee.hexToHSL(ee.intToHex(fn.NotificationBackground||1644828));E.style.setProperty("--velocity-notification-background",`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, var(--velocity-notification-transparency,  100%))`),E.style.setProperty("--velocity-notification-transparency",fn.NotificationTransparency?`${fn.NotificationTransparency}%`:"100%"),E.style.setProperty("--velocity-notification-blur",fn.NotificationBlur?`${fn.NotificationBlur}px`:"0px")})(),Cn.log("Variables Added"),(async()=>{const{WebpackModules:e,Utilities:t}=De,n=new De.Patcher("VelocityInternal_Settings"),o=await e.waitFor((e=>wn([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.getPredicateSections]))),a=(await e.waitFor((e=>wn([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("this.tabBar")])))).default;n.after(o.default.prototype,"getPredicateSections",((t,n)=>{let o=n.findIndex((e=>"discord nitro"==e.section.toLowerCase()))-2;if(o<0)return;const a=e=>{n.splice(o,0,e),o++},{Components:i,Classes:c,Actions:r}=e.common,l=i.FormDivider.default,s=i.ButtonModules,d=i.FormText.default,u=r.ModalActions;a({section:"DIVIDER"}),a({section:"HEADER",label:"Velocity"}),a({section:"settings",label:"Settings",className:"velocity-settings-tab",element:()=>[window.React.createElement(Ke,{title:"Settings"},window.React.createElement(Qe,{title:"General"},window.React.createElement(He,{name:"Stop DevTools Warnings",note:"Stops Discord from showing warnings when you open devtools.",setting:"StopWarnings"}),window.React.createElement(He,{name:"Kill Sentry",note:"Kills Sentry, a tool used by Discord to track your client.",setting:"KillSentry"}),window.React.createElement(He,{name:"Developer Mode",note:"Adds a settings tab with utilities for development.",setting:"DeveloperTab"})),window.React.createElement(Qe,{title:"Window"},window.React.createElement(He,{name:"Transparency",note:"Makes the window transparent.",setting:"Transparency"}),window.React.createElement(He,{name:"MacOS Vibrancy",note:"Makes the window have a vibrancy effect on MacOS.",setting:"Vibrancy"})),window.React.createElement(Qe,{title:"Notifications"},window.React.createElement(Re,null,window.React.createElement(s.default,{onClick:()=>{const e=_({title:"Notification",content:"This is a test notification",buttons:[{label:"Button",action:()=>{I("Toast")}},{label:"Dangerous Button",color:"RED",action:()=>{e()}}]})},style:{marginBlock:"10px"}},"Open Preview Notification")),window.React.createElement(ze,{defaultColor:Number(ee.getVariable("background-floating","hex").replace("#","0x"))||1579292,name:"Background Color",note:"The background color of notifications",setting:"NotificationBackground",action:e=>{const t=ee.hexToHSL(ee.intToHex(e));hn("--velocity-notification-background",`hsla(${t[0]}, ${t[1]}%, ${t[2]}%, var(--velocity-notification-transparency,  100%))`)}}),window.React.createElement(We,{name:"Background Opacity",note:"The opacity of the notification background",setting:"NotificationTransparency",action:e=>{hn("--velocity-notification-transparency",`${e}%`)},units:"%"}),window.React.createElement(We,{name:"Background Blur",note:"The blur of the notification background",setting:"NotificationBlur",action:e=>{hn("--velocity-notification-blur",`${Math.round(e)}px`)},maxValue:20,units:"px"})))]}),a({section:"plugins",label:"Plugins",className:"velocity-plugins-tab",element:()=>{const[e,t]=React.useState(pe.plugins),[n,o]=React.useState(""),[a,i]=React.useState(!1);return React.useEffect((()=>{const e=e=>{t(e),i(!a)};return pe.plugins.addListener(e),()=>{pe.plugins._removeListener(e)}})),[window.React.createElement(Ke,{title:"Plugins"},window.React.createElement(Be,{type:"plugins",onSearch:o}),et(e,n).length?et(e,n).map((e=>window.React.createElement(Je,{...e}))):window.React.createElement(nt,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any plugins",description:"Make sure they're installed and your search is correct"}))]}}),a({section:"themes",label:"Themes",className:"velocity-themes-tab",element:()=>{const[e,t]=React.useState(pe.themes),[n,o]=React.useState(""),[a,i]=React.useState(!1);return React.useEffect((()=>{const e=e=>{t(e),i(!a)};return pe.themes.addListener(e),()=>{pe.themes._removeListener(e)}})),[window.React.createElement(Ke,{title:"Themes"},window.React.createElement(Be,{type:"themes",onSearch:o}),et(e,n).length?et(e,n).map((e=>window.React.createElement(Je,{...e}))):window.React.createElement(nt,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any themes",description:"Make sure they're installed and your search is correct"}))]}}),a({section:"snippets",label:"Snippets",className:"velocity-snippets-tab",element:()=>window.React.createElement(Ke,{title:"Snippets"},window.React.createElement(pn,null))}),a({section:"updater",label:"Updater",className:"velocity-updater-tab",element:()=>window.React.createElement(Ke,{title:"Updater"},window.React.createElement(mt,null))}),yn.DeveloperTab&&a({section:"developer",label:"Developer",className:"velocity-developer-tab",element:()=>{const[e,t]=React.useState(""),[n,o]=React.useState(""),a=A();return window.React.createElement(Ke,{title:"Developer"},window.React.createElement(Ue,null,window.React.createElement(Qe,{title:"Developer Tools",collapsable:!1},window.React.createElement(d,{style:{marginBlock:"8px 20px"}},"A collection of utilities for you to use in development."),window.React.createElement(l,{style:{marginBottom:"20px"}}),window.React.createElement(Re,null,window.React.createElement(s.default,{color:s.ButtonColors.RED,onClick:()=>{gn.invoke(mn)}},"Kill Process"),window.React.createElement(s.default,{onClick:()=>{const e=i.ModalElements.ModalRoot;u.openModal(window.React.createElement(e,{children:{}}))}},"React Crash")),window.React.createElement(l,{style:{marginBlock:"20px"}})),window.React.createElement(Qe,{title:"Velocity Components"},window.React.createElement(Ee,null,window.React.createElement(a,{title:"Notification Title",color:n,buttons:[{label:"Change Color",action:()=>{""===n?o("error"):"error"===n?o("success"):"success"===n?o("warning"):"warning"===n?o("velocity"):"velocity"===n&&o("")}},{label:"Change Toast Color",action:()=>{""===e?t("error"):"error"===e?t("success"):"success"===e?t("warning"):"warning"===e?t("velocity"):"velocity"===e&&t("")}}],id:"velocity-notification-9999"},"Notification Content")),window.React.createElement(Ee,null,window.React.createElement(k,{color:e},"Toast Content")))))}})})),n.after(a.prototype,"render",((t,n)=>{const o=n.props.children;if(!o||!o.length||o.length<3)return;if(!o[o.length-3].type.toString().includes("separator"))return;if(!o[o.length-2].type.toString().includes("socialLinks"))return;const a=e.find(["versionHash"]),i=e.common.Components.Text.default,c=o[o.length-1].type;o[o.length-1].type=function(){const e=c(...arguments);return e.props.children.splice(1,0,window.React.createElement("span",{className:`${i.Colors.MUTED} ${i.Sizes.SIZE_12} ${a.line}`},"Velocity ",VelocityCore.Meta.version,window.React.createElement("span",{className:a.versionHash}," (",VelocityCore.Meta.hash,")"))),e}}))})(),Cn.log("Settings Added"),await t((()=>w.common.React)),Cn.log("React Loaded"),ReactDOM.render(window.React.createElement(N,{toasts:O}),C),ReactDOM.render(window.React.createElement(j,{notifications:F}),R),w.remapDefaults(),ge(),ve(),Cn.log("Plugins & Themes Initialised"),gt(),Cn.log("Snippets Run"),w.remapDefaults(),setTimeout((()=>{De.CoreUpdater.checkForUpdates(),De.PluginUpdater.checkForUpdates(),De.ThemeUpdater.checkForUpdates()}),1e3)})();
