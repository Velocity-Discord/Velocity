"use strict";const e=e=>new Promise((t=>setTimeout(t,e))),t=async t=>{let n;for(;!(n=t());)await e(1);return n};var n,o=n=class{constructor(e){n.prototype.__init.call(this),n.prototype.__init2.call(this),n.prototype.__init3.call(this),n.prototype.__init4.call(this),this.title=e,this.logs=[]}__init(){this._print=(e,...t)=>{switch(e){case"log":console.log(`%cVelocity %c ${this.title} %c`,"background: #5B88FC; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #5B88FC; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t);break;case"warn":console.warn(`%cVelocity %c ${this.title} %c`,"background: #FFC107; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #FFC107; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t);break;case"error":console.error(`%cVelocity %c ${this.title} %c`,"background: #F44336; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica; margin-right: 5px","background: #F44336; font-weight: 600; padding: 4px 6px; border-radius: 4px; color: white; font-family: Helvetica","",...t)}}}__init2(){this.log=(e,...t)=>{this._print("log",e,...t),this.logs.push(t)}}__init3(){this.warn=(e,...t)=>{this._print("warn",e,...t),this.logs.push(t)}}__init4(){this.error=(e,...t)=>{this._print("error",e,...t),this.logs.push(t)}}};function a(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const i=new o("Webpack"),c="webpackChunkdiscord_app",r=new Promise((async t=>{for(;!window[c];)await e(1);t()})),l={byDisplayName:e=>t=>a([t,"access",e=>e.default,"optionalAccess",e=>e.displayName])===e,byProps:(...e)=>t=>{if(e.every((e=>void 0!==t[e])))return!0;return!!e.every((e=>void 0!==a([t,"access",e=>e.default,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.Z,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.ZP,"optionalAccess",t=>t[e]])))||void 0},byPrototypeFields:e=>t=>{if(e.every((e=>void 0!==a([t,"access",e=>e.prototype,"optionalAccess",t=>t[e]]))))return!0;return!!e.every((e=>void 0!==a([t,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.Z,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])||void 0!==a([t,"access",e=>e.ZP,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e]])))||void 0},byStrings:(...e)=>t=>{Object.keys(t).forEach((n=>e.every((e=>t[n].toString().includes(e)))))},byPrototypeStrings:(e,...t)=>n=>{if(t.every((t=>a([n,"access",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)]))))return!0;return!!t.every((t=>a([n,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])||a([n,"access",e=>e.Z,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])||a([n,"access",e=>e.ZP,"optionalAccess",e=>e.prototype,"optionalAccess",t=>t[e],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e(t)])))||void 0},byAllPrototypeStrings:(...e)=>t=>{Object.keys(t.prototype).forEach((n=>e.every((e=>a([t,"access",e=>e.prototype,"optionalAccess",e=>e[n],"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",t=>t(e)])))))}};let s;const d=()=>s||(s=window[c].push([[Symbol("Velocity")],{},e=>e]),s),u=[],p=()=>{const e=d();let t=0;for(const n in e.c){if(u.includes(n))continue;if(!Object.hasOwnProperty.call(e.c,n))return;let o=e.c[n].exports;o&&(o.default||(["Z","ZP"].forEach((e=>{o[e]&&(o.default=o[e],t++)})),u.push(n)))}i.log(`Remapped ${t} default exports`)},m=(e,t=!1)=>{let n=!1;switch(typeof e){case"string":e=l.byDisplayName(e);break;case"object":Array.isArray(e)&&(e=l.byProps(...e))}const o=d();let a=[];for(let t in o.c){if(!Object.hasOwnProperty.call(o.c,t))return;let i=o.c[t].exports;if(i!==window&&i){!i.Z&&!i.ZP||i.default||p();try{e(i)&&a.push(i)}catch(e){n=e}}}return n&&i.warn("Filter threw an error:",n),t?a:a[0]},h=async(t,n=!1)=>{for(;!d();)await e(1);for(;!m(t,n);)await e(1);return m(t,n)};let f={};r.then((async()=>{const e=await h((e=>{for(const t of Object.keys(e))if(a([e,"access",e=>e[t],"optionalAccess",e=>e.DYNAMIC]))return!0})),t=await h((e=>{for(const t of Object.keys(e))if(e[t]&&"function"==typeof e[t].toString&&e[t].toString().includes("onCloseCallback()"))return!0})),n=await h((e=>{for(const t of Object.keys(e))if(e[t]&&"function"==typeof e[t].toString&&e[t].toString().includes("borderColor")&&e[t].toString().includes("e.grow"))return!0})),o=await h((e=>{if(e.default)return!1;for(const t of Object.keys(e))if(e[t]&&"function"==typeof e[t].toString&&e[t].toString().includes("().divider")&&e[t].toString().includes("className"))return!0})),i=await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("customColor")]))),c={};m((e=>{let t=!1;for(const n of Object.values(e))"function"==typeof n&&(n.toString().includes("CONTEXT_MENU_CLOSE")?(c.closeContextMenu=n,t=!0):t&&n.toString().includes("renderLazy")&&(c.openContextMenu=n,t=!0));return t})),f={Dispatcher:(await h(["dispatch","isDispatching"])).default,React:await h(["createElement","useEffect"]),ReactDOM:await h(["render","hydrate"]),ReactSpring:await h(["useSpring","animated"]),Stores:{MessageStore:(await h(["getMessage","getMessages"])).default,SelectedGuildStore:(await h(["getLastSelectedGuildId"])).default,SelectedChannelStore:(await h(["getLastSelectedChannelId"])).default,UserStore:(await h(["getCurrentUser"])).default,RelationshipStore:(await h(["isBlocked"])).default,GuildStore:(await h(["getGuild"])).default,GuildMemberStore:(await h(["getMember"])).default,ChannelStore:(await h(["hasChannel"])).default,InviteStore:(await h(["getInvites"])).default},Components:{_FormModules:o,FormText:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.Sizes,"optionalAccess",e=>e.SIZE_32])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.Colors]))),FormDivider:Object.values(o).find((e=>a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("divider")]))),TextInput:Object.values(o).find((e=>a([e,"optionalAccess",e=>e.Sizes,"optionalAccess",e=>e.MINI])&&a([e,"optionalAccess",e=>e.defaultProps]))),Slider:Object.values(o).find((e=>a([e,"optionalAccess",e=>e.getDerivedStateFromProps])&&a([e,"optionalAccess",e=>e.defaultProps,"optionalAccess",e=>e.stickToMarkers]))),SwitchItem:Object.values(o).find((e=>a([e,"optionalAccess",e=>e.toString,"optionalCall",e=>e(),"access",e=>e.includes,"call",e=>e("e.note")])&&a([e,"optionalAccess",e=>e.toString,"optionalCall",e=>e(),"access",e=>e.includes,"call",e=>e("focusTarget")]))),Popout:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("shouldShowPopout")]))),ConfirmModal:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("confirmText")]))),TooltipContainer:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("shouldShowTooltip")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.Positions]))),ButtonModules:{_ButtonModules:n,default:Object.values(n).find((e=>e.toString().includes("borderColor")&&e.toString().includes("e.grow"))),ButtonColors:Object.values(n).find((e=>e.BRAND_NEW)),ButtonLooks:Object.values(n).find((e=>e.FILLED)),ButtonSizes:Object.values(n).find((e=>e.TINY))},ColorPickerModules:{_ColorPickerModules:i,default:i.default,CustomColorPicker:Object.values(i).find((e=>"object"==typeof e)),CustomColorButton:Object.values(i).find((e=>a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("customColor")])&&a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("isCustom")]))),DefaultColorButton:Object.values(i).find((e=>a([e,"access",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("isDefault")])))},PanelButton:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("onContextMenu")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("tooltipText")]))),Anchor:await h((e=>a([e,"access",e=>e.P3,"optionalAccess",e=>e.contextType])&&a([e,"access",e=>e.P3,"optionalAccess",e=>e.defaultProps])&&a([e,"access",e=>e.P3,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.renderNonInteractive]))),Markdown:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.rules])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.defaultProps,"optionalAccess",e=>e.parser]))),Text:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.Sizes,"optionalAccess",e=>e.SIZE_10]))),ModalElements:{_ModalElements:e,ModalHeader:Object.values(e).find((e=>e.toString().includes("wrap")&&e.toString().includes("header"))),ModalFooter:Object.values(e).find((e=>e.toString().includes("wrap")&&e.toString().includes("footer"))),ModalRoot:Object.values(e).find((e=>e.toString().includes("size")&&e.toString().includes("dialog"))),ModalContent:Object.values(e).find((e=>e.toString().includes("scrollerRef")&&e.toString().includes("content"))),CloseButton:Object.values(e).find((e=>e.toString().includes("BLANK")&&e.toString().includes("withCircleBackground")))},EmptyState:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("onCTAClick")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("description")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("artURL")])&&!a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("stream")]))),Alert:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("title")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("body")])&&a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("secondaryConfirmText")])&&!a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("DONT_ASK_AGAIN")])))},Constants:{},Icons:{Pin:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M19 3H4.99C3.88 3 3.01 3.89 3.01 5L3")]))),Gear:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M14 7V9C14 9 12.5867 9 12.5733 9.00667C12.42 9.58667 12.1733 10.1267 11.84 10.6067L12.74 11.5067L11")]))),Plus:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("15 10 10 10 10 15 8 15 8 1")]))),Pencil:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M19.2929 9.8299L19.9409 9.18278C21.353")]))),Play:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("0 0 0 14 11 7")]))),Trash:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z")]))),Rocket:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M4.92871 13.4149L10.5857 19.0709L18.363")]))),Link:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.0")]))),PersonAdd:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M6.5 8.00667C7.88 8.00667 9 6.88667 9 5.50667C9 4.12667 7.88 3.00667 6.5 3.00667C5.12 3.00667 4 4.12667 4 5.50667C4 6.88667 5.12 8.00667")]))),Upload:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v")]))),Search:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M21.707 20.293L16.314 14.9C17.403 13.504 18 11.79")]))),Folder:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M20 7H12L10.553 5.106C10.214 4.428 9")]))),Retry:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M12 2C6.485 2 2 6.485 2 12H5.33333C5.33333 8.32")]))),Overflow:await h((e=>a([e,"access",e=>e.default,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("M7 12.001C7 10.8964 6.10457 10.001 5 10.001C3.89543 10.001 3 10.8964")])))},Classes:{Anchor:await h(["anchorUnderlineOnHover"]),ContextMenu:await h(["menu","iconContainer"]),Titles:await h(["h1","h2"]),RadioItems:await h(["item","collapsibleItem"]),Position:await h(["directionRow"])},Actions:{ContextMenuActions:c,ModalActions:{_ModalActions:t,openModal:Object.values(t).find((e=>a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("onCloseCallback")])&&a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("Layer")]))),closeModal:Object.values(t).find((e=>a([e,"optionalAccess",e=>e.toString,"call",e=>e(),"optionalAccess",e=>e.includes,"call",e=>e("onCloseCallback()")])))},Invites:(await h(["acceptInvite"])).default}}}));var w={chunkName:c,Filters:l,globalPromise:r,findModule:m,waitFor:h,remapDefaults:p,find:m,findByDisplayName:e=>m(l.byDisplayName(e)),findByProps:(...e)=>m(l.byProps(...e)),findByPrototypes:(...e)=>m(l.byPrototypeFields(e)),get __ORIGINAL_CHUNKS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return window[c]},get summon(){return s},get common(){return f}};const g=document.createElement("velocity-head"),y=document.createElement("velocity-component-styles"),v=document.createElement("velocity-themes"),b=document.createElement("velocity-snippets"),C=document.createElement("velocity-toasts"),R=document.createElement("velocity-notifications"),E=document.createElement("velocity-body");new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e)})).then((()=>{document.head.appendChild(g),document.body.appendChild(E),g.appendChild(y),g.appendChild(v),g.appendChild(b),E.appendChild(R),E.appendChild(C)}));const x=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),S=(e,t)=>{let n=document.createElement("style");n.setAttribute("id",`velocity-component-${e}-style`);for(const e in t){let o="";for(const n in t[e])o+=`${x(n)}: ${t[e][n]};`;n.innerHTML+=`${e} { ${o} }`}y.appendChild(n)};S("notification",{".velocity-notification":{backgroundColor:"var(--velocity-notification-background, var(--background-floating))",borderRadius:"5px",padding:"15px",color:"var(--header-primary)",backdropFilter:"blur(var(--velocity-notification-blur))",zIndex:"1",maxWidth:"325px",width:"fit-content",borderLeft:"5px solid #fff",transition:"all 0.2s ease",pointerEvents:"all"},".velocity-notification.color-velocity":{borderColor:"#5B88FC"},".velocity-notification.color-success":{borderColor:"#43B581"},".velocity-notification.color-error":{borderColor:"#F04747"},".velocity-notification.color-warning":{borderColor:"#FAA61A"},".notification-title":{fontSize:"16px",fontWeight:"600",display:"flex",justifyContent:"space-between",alignItems:"center"},".notification-close":{cursor:"pointer",fontSize:"16px",backgroundColor:"transparent",border:"none",color:"var(--interactive-normal)",transition:"color 0.2s ease"},".notification-close:hover":{color:"var(--interactive-hover)"},".notification-content":{fontSize:"14px",marginTop:"5px",color:"var(--header-secondary)",overflow:"hidden",textOverflow:"ellipsis"},".notification-buttons":{display:"grid",marginTop:"10px",gap:"5px",gridTemplateColumns:"repeat(var(--buttons, 1), 1fr )"}});var k=()=>React.forwardRef(((e,t)=>{const{title:n,color:o,children:a,buttons:i,id:c,onContextMenu:r,close:l}=e,s=w.common.Components.ButtonModules.default,d=w.common.Components.ButtonModules.ButtonColors,u=w.common.Components.ButtonModules.ButtonSizes;return window.React.createElement("div",{onContextMenu:r,className:`velocity-notification color-${o}`,ref:t},window.React.createElement("div",{className:"notification-title"},n,window.React.createElement("button",{className:"notification-close",onClick:()=>{l()}},window.React.createElement("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},window.React.createElement("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})))),window.React.createElement("div",{className:"notification-content"},a),i.length?window.React.createElement("div",{className:"notification-buttons",style:{"--buttons":i.length}},i.map((e=>window.React.createElement(s,{size:u.TINY,color:d[e.color]||d.BRAND,onClick:e.action,disabled:e.disabled},e.label)))):null)}));S("toast",{".velocity-toast":{backgroundColor:"var(--background-floating)",borderRadius:"5px",padding:"10px 15px",color:"var(--header-primary)",zIndex:"1",fontSize:"16px",fontWeight:"500",display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"all",width:"fit-content"},".velocity-toast.color-velocity":{backgroundColor:"#5B88FC"},".velocity-toast.color-success":{backgroundColor:"#43B581"},".velocity-toast.color-error":{backgroundColor:"#F04747"},".velocity-toast.color-warning":{backgroundColor:"#FAA61A"}});var A=e=>{const{children:t,color:n}=e;return window.React.createElement("div",{className:`velocity-toast color-${n}`},t)};const M=e=>{const{toasts:t}=e,[n,o]=React.useState(t),{useTransition:a,animated:i}=w.common.ReactSpring,c=e=>{o([...e])};React.useEffect((()=>(t.addListener(c),t.forEach((e=>{if(e.timeout){e.timeSet=!0;const n=setTimeout((()=>{t.splice(t.findIndex((t=>t.id===e.id)),1),o(t),clearTimeout(n)}),e.timeout)}})),()=>{t._removeListener(c)})));const r=a(n,{from:{translateY:-15,opacity:0,height:0,marginTop:0},enter:{translateY:0,opacity:1,height:36,marginTop:10},leave:{translateY:-15,opacity:0,height:0,marginTop:0},config:{mass:1,tension:185,friction:26}});return window.React.createElement("div",{className:"velocity-toast-wrapper"},r(((e,t)=>window.React.createElement(i.div,{className:"velocity-toast-container-item",style:e},window.React.createElement(A,{...t})))))},N=e=>{const{notifications:t}=e,{useTransition:n,animated:o}=w.common.ReactSpring,[a,i]=React.useState(t),c=k(),r=e=>{i([...e])},l=React.useRef(null);React.useEffect((()=>(t.addListener(r),t.forEach((e=>{if(e.timeout){e.timeSet=!0;const n=setTimeout((()=>{t.splice(t.findIndex((t=>t.id===e.id)),1),i(t),clearTimeout(n)}),e.timeout)}})),()=>{t._removeListener(r)})));const s=n(a,{from:{translateY:-15,opacity:0,height:0,marginTop:0},enter:e=>async e=>{await e({translateY:0,opacity:1,height:l.current?l.current.clientHeight:0,marginTop:10})},leave:{translateY:-15,opacity:0,height:0,marginTop:0},config:{mass:1,tension:185,friction:26}});return window.React.createElement("div",{className:"velocity-notification-wrapper"},s(((e,t)=>window.React.createElement(o.div,{className:"velocity-notification-container-item",style:e},window.React.createElement(c,{...t,ref:l})))))};S("context-menu",{".velocity-context-menu":{flexDirection:"column"},".velocity-menu-item:hover":{backgroundColor:"var(--brand-experiment-560)",color:"#fff"},".velocity-menu-item .velocity-menu-checkbox":{color:"#fff"},".velocity-menu-item .velocity-menu-check":{color:"var(--brand-experiment-560)"}});const j=e=>{const{Classes:t}=w.common,n=t.ContextMenu;return window.React.createElement("div",{className:`velocity-context-menu ${n.scroller} ${n.menu} ${n.flexible}`},e.children)},T=e=>{const{Classes:t,Actions:n}=w.common,o=n.ContextMenuActions,a=t.ContextMenu,{type:i,label:c,action:r,color:l,checked:s,disabled:d,onChange:u,icon:p}=e,[m,h]=React.useState(s);switch(i){case"separator":return window.React.createElement("div",{role:"separator",className:a.separator});case"check":return window.React.createElement("div",{role:"menuitem",className:`velocity-menu-item ${d?a.disabled:""} ${a.item} ${a.labelContainer} ${a[`color${l||"Default"}`]}`,onClick:e=>{!d&&r&&r(e),u&&u(!m),h(!m)}},window.React.createElement("div",{className:a.label},c),window.React.createElement("div",{className:a.iconContainer},window.React.createElement("svg",{className:a.icon,"aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},m?[window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.37499 3H18.625C19.9197 3 21.0056 4.08803 21 5.375V18.625C21 19.936 19.9359 21 18.625 21H5.37499C4.06518 21 3 19.936 3 18.625V5.375C3 4.06519 4.06518 3 5.37499 3Z",class:`velocity-menu-checkbox ${a.checkbox}`,fill:"currentColor"}),window.React.createElement("path",{d:"M9.58473 14.8636L6.04944 11.4051L4.50003 12.9978L9.58473 18L19.5 8.26174L17.9656 6.64795L9.58473 14.8636Z",className:`velocity-menu-check ${a.check}`,fill:"currentColor"})]:window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18.625 3H5.375C4.06519 3 3 4.06519 3 5.375V18.625C3 19.936 4.06519 21 5.375 21H18.625C19.936 21 21 19.936 21 18.625V5.375C21.0057 4.08803 19.9197 3 18.625 3ZM19 19V5H4.99999V19H19Z",fill:"currentColor"}))));default:return window.React.createElement("div",{role:"menuitem",className:`velocity-menu-item ${d?a.disabled:""} ${a.item} ${a.labelContainer} ${a[`color${l||"Default"}`]}`,onClick:e=>{!d&&r&&r(e),o.closeContextMenu()}},window.React.createElement("div",{className:a.label},c),p&&window.React.createElement("div",{className:a.iconContainer},window.React.createElement("icon",{className:a.icon})))}},L=e=>window.React.createElement(j,null,e.map((e=>window.React.createElement(T,{...e})))),O=(e,t)=>{const{Actions:n}=w.common,o=n.ContextMenuActions,a=L(t);return o.openContextMenu(e,(()=>a)),a};var P=Object.freeze({__proto__:null,MenuItem:T,buildMenuItem:(e={})=>{const{type:t,label:n,action:o,color:a,checked:i,disabled:c,onChange:r,icon:l}=e;return window.React.createElement(T,{type:t,label:n,action:o,color:a,checked:i,disabled:c,onChange:r,icon:l})},buildContextMenu:L,useContextMenu:O});class $ extends Array{constructor(...e){super(...e),this._listeners=[]}addListener(e){return this._listeners.push(e),()=>this._removeListener(e)}_removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}_notifyListeners(){this._listeners.forEach((e=>e(this)))}push(...e){const t=super.push(...e);return this._notifyListeners(),t}pop(){const e=super.pop();return this._notifyListeners(),e}shift(){const e=super.shift();return this._notifyListeners(),e}unshift(...e){const t=super.unshift(...e);return this._notifyListeners(),t}splice(...e){const t=super.splice(...e);return this._notifyListeners(),t}sort(...e){const t=super.sort(...e);return this._notifyListeners(),t}filter(...e){const t=super.filter(...e);return this._notifyListeners(),t}activeFilter(...e){const t=super.filter(...e);return this.splice(0,this.length,...t),this._notifyListeners(),t}insertNew(e,t){let n=0;switch(t){case"object":n=this.findIndex((t=>t[0]===e[0]));break;case"string":n=this.findIndex((t=>t===e))}return this._notifyListeners(),n?(this.splice(n,0,e),this.push(e)):this.push(e)}}S("notifications",{".velocity-notification-wrapper":{position:"fixed",right:"15px",top:"15px",zIndex:"1001",display:"flex",flexDirection:"column",alignItems:"flex-end",transition:"all 0.2s ease",pointerEvents:"none"},".velocity-toast-wrapper":{position:"fixed",display:"flex",flexDirection:"column",alignItems:"center",marginTop:"15px",width:"100%",zIndex:"3000",pointerEvents:"none",transition:"all 0.2s ease",pointerEvents:"none"}});let I=0;const D=new $,F=(e,t={})=>{const{type:n="",timeout:o=3e3}=t;I++;const a={color:n,id:I,children:e,timeout:o};D.push(a)};let _=0;const B=new $,V=(e={})=>{const{title:t="",content:n="",buttons:o=[],type:a=""}=e;_++;const i={id:_,color:a,title:t,buttons:o,children:n,close:()=>{B.splice(B.indexOf(i),1)},onContextMenu:e=>O(e,[{label:"Close",action:()=>{B.splice(B.indexOf(i),1)}},{label:"Close All",color:"Danger",action:()=>{B.splice(0,B.length)}}])};B.push(i)},U=(e={})=>{const{Components:t,Actions:n,Classes:o}=w.common,{title:a="",content:i="",confirmText:c="Confirm",cancelText:r="Cancel",onConfirm:l=(()=>{}),onCancel:s=(()=>{}),danger:d=!1}=e,u=t.Text.default,p=n.ModalActions,m=t.Markdown.default,h=t.ModalElements,f=t.ButtonModules.default,g=t.ButtonModules.ButtonLooks,y=t.ButtonModules.ButtonColors;return p.openModal((e=>window.React.createElement(h.ModalRoot,{...e},window.React.createElement(h.ModalHeader,{separator:!1},window.React.createElement(u,{size:u.Sizes.SIZE_20,color:u.Colors.HEADER_PRIMARY,className:o.Titles.h1},a)),window.React.createElement(h.ModalContent,{className:"velocity-modal-content"},"string"==typeof i?window.React.createElement(m,{className:"velocity-modal-content"},i):i),window.React.createElement(h.ModalFooter,null,window.React.createElement(f,{color:d?y.RED:y.BRAND,onClick:t=>{l(t),e.onClose()}},c),window.React.createElement(f,{color:y.PRIMARY,look:g.LINK,onClick:t=>{s(t),e.onClose()}},r)))))},z=new o("Datastore"),H=VelocityCore.modules.fs,W=VelocityCore.modules.path,Z=VelocityCore.baseDir,G=()=>{H.existsSync(q)||H.mkdirSync(q)},q=W.join(Z,"data"),Y=e=>{G();try{return H.existsSync(W.join(q,`${e}.json`))?JSON.parse(H.readFileSync(W.join(q,`${e}.json`),"utf8")):{}}catch(e){z.error(e)}},J=(e,t)=>{G();try{return Y(e)[t]||null}catch(e){z.error(e)}},K=(e,t,n)=>{G();try{const o=Y(e);o[t]=n,H.writeFileSync(W.join(q,`${e}.json`),JSON.stringify(o))}catch(e){z.error(e)}},X=(e,t)=>{G();try{const n=Y(e);delete n[t],H.writeFile(W.join(q,`${e}.json`),JSON.stringify(n))}catch(e){z.error(e)}},Q={},ee=e=>{let t;return Q[e]?t=Q[e]:(t=Y(e),Q[e]=t),new Proxy(t,{get:(n,o)=>t[o]||J(e,o),set:(n,o,a)=>(t[o]=a,K(e,o,a),!0),deleteProperty:(n,o)=>(t[o]=void 0,X(e,o),!0)})};var te=Object.freeze({__proto__:null,dir:q,getAllData:Y,getData:J,setData:K,deleteData:X,Stream:ee}),ne={intToHex(e){const t=e.toString(16);return`#${6!==t.length?"0".repeat(6-t.length)+t:t}`},hexToRGB(e){const[t,n,o]=e.match(/\w\w/g).map((e=>parseInt(e,16)));return[t,n,o]},rgbToHSL(e){const{r:t,g:n,b:o}=e,a=t/255,i=n/255,c=o/255;let r=Math.max(a,i,c),l=Math.min(a,i,c),s=(r+l)/2,d=s,u=s;if(r===l)return[0,0,u];const p=r-l;switch(d=u>=.5?p/(2-(r+l)):p/(r+l),r){case a:s=60*((i-c)/p+0);break;case i:s=60*((c-a)/p+2);break;case c:s=60*((a-i)/p+4)}return[Math.round(s),Math.round(100*d),Math.round(100*u)]},hexToHSL(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16)/255,o=parseInt(t[2],16)/255,a=parseInt(t[3],16)/255,i=Math.max(n,o,a),c=Math.min(n,o,a);let r=(i+c)/2,l=r,s=r;if(i===c)return[0,0,s];const d=i-c;switch(l=s>.5?d/(2-i-c):d/(i+c),i){case n:r=(o-a)/d+(o<a?6:0);break;case o:r=(a-n)/d+2;break;case a:r=(n-o)/d+4}return r/=6,l*=100,l=Math.round(l),s*=100,s=Math.round(s),r=Math.round(360*r),[r,l,s]},rgbToHex(e){const{r:t,g:n,b:o}=e;return`#${((1<<24)+(t<<16)+(n<<8)+o).toString(16).slice(1)}`},hslToRGB(e){const t=e[0]/360,n=e[1]/100,o=e[2]/100;let a,i,c;if(0===n)a=i=c=o;else{const e=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),r=o<.5?o*(1+n):o+n-o*n,l=2*o-r;a=e(l,r,t+1/3),i=e(l,r,t),c=e(l,r,t-1/3)}return[Math.round(255*a),Math.round(255*i),Math.round(255*c)]},getType(e){const t=e.toLowerCase().trim();return t.startsWith("#")?"hex":t.startsWith("rgba")?"rgba":t.startsWith("rgb")?"rgb":t.startsWith("hsla")?"hsla":t.startsWith("hsl")?"hsl":"int"},getVariable(e,t){const n=document.documentElement,o=getComputedStyle(n).getPropertyValue(e.startsWith("--")?e:`--${e}`).trim();if(o.includes("calc"))return o;if(o.includes("var"))return o;const a=this.getType(o);switch(t){case"hex":if("hex"===a)return o;if("rgb"===a)return this.rgbToHex(o);if("hsl"===a)return this.rgbToHex(this.hslToRGB(o));break;case"rgb":if("rgb"===a)return o;if("hex"===a)return this.hexToRGB(o);if("hsl"===a)return this.hslToRGB(o);case"hsl":if("hsl"===a)return o;if("hex"===a)return this.rgbToHSL(this.hexToRGB(o));if("rgb"===a)return this.rgbToHSL(o);default:return o}return null},formatHex(e){switch(e.length){case 4:return`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`;case 7:return e;case 9:return e.substring(0,7);default:return null}},getRootVariables(e){const t=e.match(/:root,*[\s]*.*\{([^}]+)\}/);if(!t)return[];const n=t[1].match(/--[^:]+:[^;]+/g);return n?n.map((e=>{const[t,n]=e.split(":");return{name:t.trim(),value:n.trim()}})):[]}},oe={formatName(e){const t=e.split(/[-_]/);for(let e=0;e<t.length;e++)t[e]=t[e][0].toUpperCase()+t[e].slice(1);return t.join(" ")}};function ae(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const ie=new o("Addon Manager"),ce=VelocityCore.modules.sucrase,re=VelocityCore.modules.fs,le=VelocityCore.modules.path,se=VelocityCore.modules.shell,de=VelocityCore.baseDir,ue=ee("config"),pe=le.join(de,"plugins"),me=le.join(de,"themes"),he={plugins:new $,themes:new $};let fe=Array.isArray(ue.enabledPlugins)?new $(...ue.enabledPlugins):new $,we=Array.isArray(ue.enabledThemes)?new $(...ue.enabledThemes):new $;fe.addListener((e=>{ue.enabledPlugins=[...e]})),we.addListener((e=>{ue.enabledThemes=[...e]}));const ge=()=>{re.existsSync(pe)||re.mkdirSync(pe),re.existsSync(me)||re.mkdirSync(me)},ye=e=>e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),ve=()=>{ge(),F("Reading Plugin Files",{type:"velocity"}),re.readdir(pe,((e,t)=>{e&&ie.error("Error reading plugin files",e);t.filter((e=>!e.includes("/")&&!e.includes("."))).forEach((e=>{if(!re.existsSync(le.join(pe,e,"velocity_manifest.json")))return ie.error(`Plugin ${e} does not have a manifest file!`);try{const t=JSON.parse(re.readFileSync(le.join(pe,e,"velocity_manifest.json"),"utf8"));let n={name:t.name,description:t.description,version:t.version,author:t.author,license:t.license,filePath:le.join(pe,e),social:{invite:ae([t,"access",e=>e.social,"optionalAccess",e=>e.invite]),website:ae([t,"access",e=>e.social,"optionalAccess",e=>e.website]),github:ae([t,"access",e=>e.social,"optionalAccess",e=>e.github]),donate:ae([t,"access",e=>e.social,"optionalAccess",e=>e.donate])},main:t.main,updates:t.updates,_type:"Plugins"};const o=re.readFileSync(le.join(pe,e,n.main),"utf8"),a=ce.transform(o,{transforms:["jsx"],jsxPragma:"Velocity.WebpackModules.common.React.createElement",jsxFragmentPragma:"Velocity.WebpackModules.common.React.Fragment",production:!0}).code,i=new Function("Velocity","module","VelocityCore",`${a}; return module.exports//# sourceURL=velocity://${n.name}.js`)(Velocity,{exports:{}},VelocityCore);n.instance=new i(n),he.plugins.insertNew(n),F(`Loaded ${n.name}`),be.isEnabled(n.name)&&(be.disable(n.name,!0),be.enable(n.name))}catch(t){ie.error(`Error loading ${e}`,t),F(`Error loading ${e}`,{type:"error"})}}))}))},be={get dir(){return pe},get:e=>he.plugins.find((t=>t.name===e)),getAll:()=>he.plugins,isEnabled:e=>fe.includes(e),getEnabled:()=>he.plugins.filter((e=>be.isEnabled(e.name))),enable:e=>{const t=he.plugins.find((t=>t.name===e));if(t){try{fe.includes(t.name)||fe.insertNew(t.name),t.instance.onStart(),F(`Enabled ${t.name}`,{type:"success"})}catch(e){ie.error(`Error enabling plugin '${t.name}'.`,e),F(`Error enabling ${t.name}`,{type:"error"})}return!0}},disable:(e,t)=>{const n=he.plugins.find((t=>t.name===e));if(n){try{fe.activeFilter((t=>t!==e)),n.instance.onStop(),t||F(`Disabled ${n.name}`,{type:"success"})}catch(e){ie.error(`Error disabling plugin '${n.name}'.`,e),F(`Error disabling ${n.name}`,{type:"error"})}return!0}},unlink:e=>{const t=he.plugins.find((t=>t.name===e));if(t){try{be.disable(e,!0),he.plugins.activeFilter((t=>t.name!==e)),F(`Unlinked ${t.name}`,{type:"success"})}catch(e){ie.error(`Error unlinking plugin '${t.name}'.`,e),F(`Error unlinking ${t.name}`,{type:"error"})}return!0}},delete:e=>{const t=he.plugins.find((t=>t.name===e));if(t){try{be.unlink(e),re.rmSync(t.filePath,{recursive:!0}),F(`Deleted ${t.name}`,{type:"error"})}catch(e){ie.error(`Error deleting plugin '${t.name}'.`,e),F(`Error deleting ${t.name}`,{type:"error"})}return!0}},toggle:e=>{be.isEnabled(e)?be.disable(e):be.enable(e)},openFolder:e=>{const t=he.plugins.find((t=>t.name===e));t&&se.openPath(t.filePath)},openDir:()=>{se.openPath(pe)},reload(){he.plugins.length=0,Velocity.AddonManager.Registry.plugins.length=0,ve()}},Ce=()=>{ge(),F("Reading Theme Files",{type:"velocity"}),re.readdir(me,((e,t)=>{e&&ie.error("Error reading theme files",e);t.filter((e=>!e.includes("/")&&!e.includes("."))).forEach((e=>{if(!re.existsSync(le.join(me,e,"velocity_manifest.json")))return ie.error(`Theme ${e} does not have a manifest file!`);try{const t=JSON.parse(re.readFileSync(le.join(me,e,"velocity_manifest.json"),"utf8"));let n={name:t.name,description:t.description,version:t.version,author:t.author,license:t.license,filePath:le.join(me,e),social:{invite:ae([t,"access",e=>e.social,"optionalAccess",e=>e.invite]),website:ae([t,"access",e=>e.social,"optionalAccess",e=>e.website]),github:ae([t,"access",e=>e.social,"optionalAccess",e=>e.github]),donate:ae([t,"access",e=>e.social,"optionalAccess",e=>e.donate])},main:t.main,updates:t.updates,_type:"Themes"};const o=re.readFileSync(le.join(me,e,n.main),"utf8");n.code=o;const a=ne.getRootVariables(o);a.length&&(n.instance={renderSettings:()=>a.map((e=>{const{name:t,value:n}=e;if(n.trim().startsWith("#"))try{return{default:Number(ne.formatHex(n.trim()).replace("#","0x")),id:t.replace("--","").trim(),name:oe.formatName(t.replace("--","").trim()),note:`#${n.trim().replace("#","")}`,type:"color",action:e=>{const n=ne.formatHex(`#${e.toString(16)}`);document.body.style.setProperty(t,n)}}}catch(e){return null}return null})),settings:ee(n.name)}),he.themes.insertNew(n),F(`Loaded ${n.name}`),Re.isEnabled(n.name)&&(Re.disable(n.name,!0),Re.enable(n.name))}catch(t){ie.error(`Error loading ${e}`,t),F(`Error loading ${e}`,{type:"error"})}}))}))},Re={get dir(){return me},get:e=>he.themes.find((t=>t.name===e)),getAll:()=>he.themes,isEnabled:e=>we.includes(e),getEnabled:()=>he.themes.filter((e=>Re.isEnabled(e.name))),enable:e=>{const t=he.themes.find((t=>t.name===e));if(t){try{we.includes(t.name)||we.insertNew(t.name);const e=document.createElement("style");if(e.id=`velocity-theme-${ye(t.name)}`,e.innerHTML=t.code,v.appendChild(e),t.instance&&t.instance.settings)for(const[e,n]of Object.entries(Y(t.name))){const t=ne.formatHex(`#${n.toString(16)}`);document.body.style.setProperty(`--${e}`,t)}F(`Enabled ${t.name}`,{type:"success"})}catch(e){ie.error(`Error enabling theme '${t.name}'.`,e),F(`Error enabling ${t.name}`,{type:"error"})}return!0}},disable:(e,t)=>{const n=he.themes.find((t=>t.name===e));if(n){try{we.activeFilter((t=>t!==e));const o=document.getElementById(`velocity-theme-${ye(n.name)}`);if(o&&o.remove(),n.instance&&n.instance.settings)for(let[e,t]of Object.entries(Y(n.name)))document.body.style.removeProperty(`--${e}`);t||F(`Disabled ${n.name}`,{type:"success"})}catch(e){ie.error(`Error disabling theme '${n.name}'.`,e),F(`Error disabling ${n.name}`,{type:"error"})}return!0}},unlink:e=>{const t=he.themes.find((t=>t.name===e));if(t){try{Re.disable(e,!0),he.themes.activeFilter((t=>t.name!==e)),F(`Unlinked ${t.name}`,{type:"success"})}catch(e){ie.error(`Error unlinking theme '${t.name}'.`,e),F(`Error unlinking ${t.name}`,{type:"error"})}return!0}},delete:e=>{const t=he.themes.find((t=>t.name===e));if(t){try{Re.unlink(e),re.rmSync(t.filePath,{recursive:!0}),F(`Deleted ${t.name}`,{type:"error"})}catch(e){ie.error(`Error deleting theme '${t.name}'.`,e),F(`Error deleting ${t.name}`,{type:"error"})}return!0}},toggle:e=>{Re.isEnabled(e)?Re.disable(e):Re.enable(e)},openFolder:e=>{const t=he.themes.find((t=>t.name===e));t&&se.openPath(t.filePath)},openDir:()=>{se.openPath(me)},reload(){he.themes.length=0,Velocity.AddonManager.Registry.themes.length=0,Ce()}};var Ee=Object.freeze({__proto__:null,Registry:he,enabledPlugins:fe,enabledThemes:we,initPlugins:ve,Plugins:be,initThemes:Ce,Themes:Re});S("button-container",{".velocity-button-container":{display:"flex",gap:"5px"}});var xe=e=>{const{children:t}=e;return window.React.createElement("div",{className:"velocity-button-container"},t)};S("component-preview",{".velocity-component-preview":{backgroundColor:"var(--background-secondary)",color:"var(--header-primary)",marginBlock:"8px 10px",padding:"20px",borderRadius:"5px",fontSize:"16px",fontWeight:"500",display:"flex",width:"100%",zIndex:"1"}});var Se=e=>{const{children:t}=e;return window.React.createElement("div",{className:"velocity-component-preview"},t)};const ke=VelocityCore.modules.fs,Ae=VelocityCore.modules.path,Me=new o("Addon Actions"),Ne=async e=>{let t,n,o;try{t=new URL(e.endsWith("/")?e:e+"/"),n=new URL("velocity_manifest.json",t)}catch(e){return F("Invalid URL",{type:"error"})}try{const e=JSON.parse(await VelocityCore.request(n.href));o={manifest:e,main:await VelocityCore.request(new URL(e.main,t).href)}}catch(e){Me.error("Failed to traverse addon paths:",e),F("Failed to traverse addon paths",{type:"error"})}return o},je=async(e,t)=>{const n=e.main.match(/require\("(.+)"\)/g);let o=[];if(n)for(const e of n){const n=e.match(/require\("(.+)"\)/)[1].replace(/\.\.\/plugins\/.*\//,""),a=new URL(n,t);o.push({url:a.href,path:n})}return o},Te=async e=>{if(!e)return F("Invalid URL",{type:"error"});const t=await Ne(e),n=t.manifest.main.endsWith(".js")?"Plugins":"Themes",o=Ae.join(Ee[n].dir,t.manifest.name);if(Me.log(`Installing ${n.substring(0,n.length-1)} from ${e}`),ke.existsSync(o))return Me.error(`Addon already exists: '${t.manifest.name}'`),void F("Addon already exists",{type:"error"});if(ke.mkdirSync(o),ke.writeFileSync(Ae.join(o,"velocity_manifest.json"),JSON.stringify(t.manifest)),ke.writeFileSync(Ae.join(o,t.manifest.main),t.main),!t)return;return(await je(t,e)).forEach((async e=>{try{ke.writeFileSync(Ae.join(o,e.path),await VelocityCore.request(e.url))}catch(e){Me.error("Failed to install addon:",e),F(`Could not traverse imports for ${t.manifest.name}`,{type:"error"})}})),Me.log(`Installed ${t.manifest.name}`),F(`Installed ${t.manifest.name}`,{type:"success"}),!0},Le=VelocityCore.modules.originalFs,Oe=VelocityCore.modules.path,Pe=new o("Updater"),$e=class{constructor(e){this.type=e,this.state="idle",this.lastChecked=null,this.updatesAvailable=!1,this.updateInfo=null}fail(e){this.state="error",Pe.error(`Failed to check for addon update: ${e}`),F("Failed to check for addon updates.","error")}async checkForUpdates(){this.lastChecked=Date.now(),this.state="checking",he[this.type].forEach((e=>{if(e.updates)switch(typeof e.updates){case"string":this.checkForUpdatesFromUrl(e);break;case"object":this.checkForUpdatesFromObject(e)}})),this.state="idle"}async checkForUpdatesFromUrl(e){const t=await Ne(e.updates);return t?(t.manifest.version!==e.version&&(this.updatesAvailable=!0,this.state="available",this.updateInfo={...this.updateInfo,[e.name]:t}),t):this.fail(`Failed to fetch update data for ${e.name}.`)}async checkForUpdatesFromObject(e){const{url:t}=e.updates,n=await Ne(t);if(!n)return this.fail(`Failed to fetch update data for ${e.name}.`);n.manifest.version!==e.version&&(this.updatesAvailable=!0,this.state="available",this.updateInfo={...this.updateInfo,[e.name]:n})}async downloadUpdate(e){if(!this.updateInfo[e])return this.fail(`Failed to find update data for ${e}.`);const t=this.updateInfo[e],n=t.manifest.main.endsWith(".js")?"Plugins":"Themes",o=Oe.join(Ee[n].dir,t.manifest.name);if(!Le.existsSync(o))return this.fail(`Failed to find addon directory for ${e}.`);const a=await je(t.manifest.main,t);return Le.writeFileSync(Oe.join(o,"velocity_manifest.json"),JSON.stringify(t.manifest)),a.forEach((async e=>{Le.writeFileSync(Oe.join(o,e.path),await VelocityCore.request(e.url))})),delete this.updateInfo[e],t}async downloadAllUpdates(){const e=Object.keys(this.updateInfo);for(const t of e)await this.downloadUpdate(t)}};var Ie=Object.freeze({__proto__:null,injectCSS:(e,t)=>{let n=`velocity-style-${e.replace(/[^a-zA-Z0-9]/g,"-")}`;if(document.getElementById(n))return;let o=document.createElement("style");return o.id=n,o.innerHTML=t,g.appendChild(o),n},removeCSS:e=>{let t=`velocity-style-${e.replace(/[^a-zA-Z0-9]/g,"-")}`,n=document.getElementById(t);n&&n.remove()}});const De=new o("Patcher");class Fe{constructor(e){Fe.prototype.__init.call(this),this.id=e}__init(){this.patches=[]}_buildPatch(e,t,n,o){const a={type:e,module:t,method:n,options:o,id:this.id,revert:()=>{this.unpatch(t,n)},proxy:null,originalMethod:t[n]};a.proxy=this._buildProxy(a);const i=Object.getOwnPropertyDescriptor(t,n);if(i&&i.get){a.overWritten=!0;try{Object.defineProperty(t,n,{configurable:!0,enumerable:!0,...i,get:()=>a.proxy,set:e=>a.originalMethod=e})}catch(e){De.error("Failed to overwrite getter",e)}}else t[n]=a.proxy;return this.patches.push(a),a}_buildProxy(e){return function(){const{type:t,options:n,originalMethod:o}=e;let a=o.apply(this,arguments);switch(t){case"before":try{n.callback(arguments)}catch(e){De.error("Failed to call before patch",e)}case"instead":try{a=n.callback(arguments,o.bind(this))}catch(e){De.error("Failed to call instead patch",e)}case"after":try{n.callback(arguments,a)}catch(e){De.error("Failed to call after patch",e)}}return a}}unpatch(e,t){const n=this.patches.find((n=>n.module===e&&n.method===t));n&&(n.overWritten?Object.defineProperty(e,t,{...Object.getOwnPropertyDescriptor(e,t),get:()=>n.originalMethod,set:void 0}):e[t]=n.originalMethod,this.patches.splice(this.patches.indexOf(n),1))}unpatchAll(){this.patches.forEach((e=>{this.unpatch(e.module,e.method)}))}before(e,t,n,o){return this._buildPatch("before",e,t,{...o,callback:n})}instead(e,t,n,o){return this._buildPatch("instead",e,t,{...o,callback:n})}after(e,t,n,o){return this._buildPatch("after",e,t,{...o,callback:n})}}w.globalPromise.then((async()=>{window.React=await w.waitFor(["createElement","useEffect"]),window.ReactDOM=await w.waitFor(["render","hydrate"])}));var _e={CoreUpdater:new class{constructor(){this.updateAvailable=!1,this.lastChecked=null,this.updateInfo=null,this.state="idle",this.endpoint="https://api.github.com/repos/Velocity-Discord/Velocity/releases"}fail(e){this.state="error",Pe.error(`Failed to check for updates: ${e}`),V({title:"Update Failed",content:e,type:"error"})}async checkForUpdates(){let e,t;this.lastChecked=Date.now(),this.state="checking";try{e=await VelocityCore.request(this.endpoint+"/latest",{headers:{"User-Agent":"Velocity-Discord"}}),t=JSON.parse(e)}catch(e){return this.fail(`Failed to fetch latest release. ${e}`)}const n={version:t.name.replace("[Release] ","").replace(/^v/,""),tag_name:t.tag_name,name:t.name,notes:t.body,asar:t.assets.find((e=>e.name.endsWith(".asar"))),timestamp:new Date(t.published_at)};return n.asar?(this.updateInfo=n,n.version!==VelocityCore.Meta.version?(this.updateAvailable=!0,this.state="available",V({title:"Update Available",content:"A new update is available! Click here to download it.",buttons:[{label:"Download",action:()=>{this.downloadUpdate()}}]})):(this.updateAvailable=!1,this.state="no-updates"),n):this.fail("Failed to find asar in latest release.")}async downloadUpdate(){const{asar:e}=this.updateInfo;VelocityCore.request(e.browser_download_url,((e,t,n)=>{if(e)return this.fail("Failed to get asar data.");const o=Oe.join(VelocityCore.baseDir,"dist/velocity.asar");try{Le.writeFileSync(o,n),V({title:"Update Downloaded",content:"Velocity has been updated. Please relaunch Velocity to apply the update.",buttons:[{label:"Relaunch",action:()=>{DiscordNative.app.relaunch()}}]}),this.state="no-updates"}catch(e){this.fail("Failed to write asar to disk.")}}))}},ThemeUpdater:new $e("themes"),PluginUpdater:new $e("plugins"),Plugin:class{constructor(e){this.manifest=e,this.settings=Y(e.name)}onStart(){}onStop(){}},Styling:Ie,Patcher:Fe,DataStore:te,ContextMenu:P,Logger:o,AddonManager:{...Ee,installAddon:Te},WebpackModules:w,Notifications:{showNotification:V,showToast:F,showConfirmationModal:U},Utilities:{waitUntil:t}};const{WebpackModules:Be,AddonManager:Ve}=_e;S("addon-header",{".velocity-addon-header":{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"5px",marginBottom:"15px"},".addon-searchbar":{width:"100%",height:"32px",background:"var(--background-tertiary)",borderRadius:"4px",padding:"0 10px",color:"var(--text-muted)",display:"flex",alignItems:"center",gap:"10px"},".addon-searchbar input":{width:"100%",height:"100%",background:"transparent",border:"none",color:"var(--text-normal)",fontSize:"14px",fontWeight:"500"},".addon-searchbar svg":{width:"20px",height:"20px"},".addon-buttons":{display:"flex",alignItems:"center"}});var Ue=e=>{const{type:t,onSearch:n}=e,[o,a]=React.useState(""),i="plugins"===t?"Plugins":"Themes",{Components:c,Icons:r}=Be.common,l=c.PanelButton.default;return window.React.createElement("div",{className:"velocity-addon-header"},window.React.createElement("div",{onContextMenu:e=>{O(e,[{label:"Install from URL",action:()=>{Ve.installAddon(o)}}])},className:"addon-searchbar"},window.React.createElement("input",{onChange:e=>{a(e),n(e)},placeholder:"Search..."}),window.React.createElement(r.Search.default,null)),window.React.createElement("div",{className:"addon-buttons"},window.React.createElement(l,{tooltipText:`Open ${"themes"==t?"Theme":"Plugin"} Folder`,icon:r.Folder.default,onClick:()=>Ve[i].openDir()}),window.React.createElement(l,{tooltipText:`Reload ${i}`,icon:r.Retry.default,onClick:()=>Ve[i].reload()})))},ze=e=>{const{children:t,tag:n,className:o,style:a}=e,i=w.find(["h1","title"]),c={style:a,className:`${i.defaultColor} ${i[n]} ${i[`defaultMargin${n}`]} ${o}`};switch(n){case"h1":default:return window.React.createElement("h1",{...c},t);case"h2":return window.React.createElement("h2",{...c},t);case"h3":return window.React.createElement("h3",{...c},t);case"h4":return window.React.createElement("h4",{...c},t);case"h5":return window.React.createElement("h5",{...c},t);case"h6":return window.React.createElement("h6",{...c},t)}},He=e=>window.React.createElement("div",{className:`velocity-setting ${e.className||""}`},e.children);S("color-setting",{".velocity-color-setting":{display:"flex",justifyContent:"space-between"}});var We=e=>{const{Components:t}=w.common,{default:n}=t.TooltipContainer,o=t.FormText.default,a=t.ColorPickerModules,i=t.Popout.default,c=function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([a,"optionalAccess",e=>e.CustomColorButton,"access",e=>e.prototype,"access",e=>e.render,"access",e=>e.call,"call",e=>e({props:{}}),"access",e=>e.type]),{name:r,note:l,setting:s,action:d,defaultColor:u,palette:p=[],container:m="config"}=e,h=ee(m),[f,g]=React.useState(h[s]),y=()=>window.React.createElement(a.CustomColorPicker,{value:f,onChange:e=>{"function"==typeof d&&d(e),h[s]=e,g(e)}});return window.React.createElement(He,{className:"velocity-color-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(ze,{tag:"h3",style:{margin:"0"}},r),window.React.createElement(o,{type:"description"},l)),window.React.createElement(a.default,{className:"velocity-color-picker",value:f,colors:p,onChange:e=>{"function"==typeof d&&d(e),g(e),h[s]=e},renderDefaultButton:()=>window.React.createElement(n,{position:"bottom",text:"Default",children:e=>window.React.createElement(a.DefaultColorButton,{...e,color:u,onChange:()=>{"function"==typeof d&&d(u),g(u),h[s]=u}})}),renderCustomButton:()=>window.React.createElement(i,{renderPopout:y,animation:"translate",align:"center",position:"top",children:e=>window.React.createElement(n,{position:"bottom",text:"Pick a Color",children:t=>window.React.createElement("div",{...t,...e,className:"color-button"},window.React.createElement(c,{isCustom:!0,color:f}))})})}))},Ze=e=>{const{Components:t}=w.common,n=t.FormText.default,o=t.TextInput.default,{name:a,note:i,setting:c,action:r,disabled:l,maxLength:s,type:d,placeholder:u,container:p="config"}=e,m=ee(p),[h,f]=React.useState(m[c]);return window.React.createElement(He,{className:"velocity-textinput-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(ze,{tag:"h3",style:{margin:"0"}},a),window.React.createElement(n,{type:"description"},i)),window.React.createElement(o,{value:h,onChange:e=>{"function"==typeof r&&r(e),m[c]=e,f(e)},disabled:l,maxLength:s,type:d,placeholder:u}))};S("switch",{".velocity-switch":{position:"relative",width:"40px",height:"24px",borderRadius:"14px",cursor:"pointer",opacity:"1",backgroundColor:"rgb(114, 118, 125)",transition:"250ms cubic-bezier(0, 0.3, 0.7, 1) background-color"},".velocity-switch-disabled":{opacity:"0.5",backgroundColor:"rgb(114, 118, 125)"},".velocity-switch-checked":{opacity:"1",backgroundColor:"rgb(59, 165, 92)"},".velocity-switch input":{position:"absolute",opacity:"0",width:"100%",height:"100%",borderRadius:"14px",cursor:"pointer"},".velocity-switch svg":{pointerEvents:"none",display:"block",position:"absolute",left:"-5px",width:"28px",height:"18px",margin:"3px",transition:"250ms cubic-bezier(0, 0.3, 0.7, 1)"},".velocity-switch-checked svg":{left:"12px"},".velocity-switch svg path":{color:"rgb(114, 118, 125)",transition:"250ms cubic-bezier(0, 0.3, 0.7, 1)"},".velocity-switch-checked svg path":{color:"rgb(59, 165, 92)"}});var Ge=e=>{const{checked:t,disabled:n}=e,[o,a]=React.useState(t);return window.React.createElement("div",{className:`velocity-switch ${n?"velocity-switch-disabled":""} ${o?"velocity-switch-checked":""}`},window.React.createElement("input",{type:"checkbox",disabled:n,checked:o,onChange:()=>{n||(a(!o),function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}}([e,"access",e=>e.action,"optionalCall",e=>e(!o)]))}}),window.React.createElement("svg",{className:"velocity-switch-slider",viewBox:"0 0 28 20"},window.React.createElement("rect",{fill:"white",x:"4",y:"0",height:"20",width:"20",rx:"10"}),window.React.createElement("svg",{viewBox:"0 0 20 20",fill:"none"},o?window.React.createElement("path",{fill:"currentColor",d:"M7.89561 14.8538L6.30462 13.2629L14.3099 5.25755L15.9009 6.84854L7.89561 14.8538Z M4.08643 11.0903L5.67742 9.49929L9.4485 13.2704L7.85751 14.8614L4.08643 11.0903Z"}):window.React.createElement("path",{fill:"currentColor",d:"M5.13231 6.72963L6.7233 5.13864L14.855 13.2704L13.264 14.8614L5.13231 6.72963Z M13.2704 5.13864L14.8614 6.72963L6.72963 14.8614L5.13864 13.2704L13.2704 5.13864Z"}))))},qe=e=>{const{Components:t}=w.common,n=t.SwitchItem.default,{name:o,note:a,setting:i,action:c,container:r="config"}=e,l=ee(r),[s,d]=React.useState(l[i]);return window.React.createElement(He,{className:"velocity-switch-setting"},window.React.createElement(n,{note:a,value:s,onChange:e=>{"function"==typeof c&&c(e),l[i]=e,d(e)}},o))},Ye=e=>{const{Components:t}=w.common,n=t.FormText.default,o=t.Slider.default,{name:a,note:i,setting:c,action:r,disabled:l=!1,minValue:s=0,maxValue:d=100,handleSize:u=10,units:p="",container:m="config",stickToMarkers:h}=e,f=ee(m),[g,y]=React.useState(f[c]);let v=e=>`${Math.round(e)}`,b=e=>`${Math.round(e)}`;if(p){const e=e=>`${Math.round(e)}${p}`;v=e,b=e}return window.React.createElement(He,{className:"velocity-slider-setting"},window.React.createElement("div",{className:"velocity-setting-info"},window.React.createElement(ze,{tag:"h3",style:{margin:"0"}},a),window.React.createElement(n,{type:"description"},i)),window.React.createElement(o,{onValueChange:e=>{"function"==typeof r&&r(e),f[c]=e,y(e)},value:g,disabled:l,minValue:s,maxValue:d,handleSize:u,initialValue:g,onMarkerRender:v,onValueRender:b,stickToMarkers:h}))};function Je(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const{WebpackModules:Ke,AddonManager:Xe}=_e;S("addon-card",{".velocity-addon-card":{display:"flex",flexDirection:"column",width:"100%",gap:"10px",padding:"15px",borderRadius:"5px",backgroundColor:"var(--background-secondary)",marginBottom:"10px"},".addon-card-header":{display:"flex",alignItems:"center",justifyContent:"space-between",color:"var(--text-normal)",cursor:"pointer"},".addon-card-header-left":{display:"flex",gap:"5px",alignItems:"flex-end"},".addon-card-header-title":{fontSize:"20px",fontWeight:"500",color:"var(--header-primary)"},".addon-card-header-subtitle":{fontSize:"14px",fontWeight:"400",color:"var(--header-secondary)"},".addon-card-lower":{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",gap:"10px"},".addon-card-description":{fontSize:"14px",fontWeight:"400"},".addon-card-footer":{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"5px"},".addon-card-footer > span > button":{width:"32px !important"},".addon-card-settings-header":{display:"flex",alignItems:"center",color:"var(--text-normal)",cursor:"pointer",marginBottom:"10px",gap:"5px"},".addon-card-settings-header svg:hover":{color:"var(--interactive-hover)"}});var Qe=e=>{const{Components:t,Icons:n}=Ke.common,o=t.Markdown.default,a=t.PanelButton.default,{name:i,description:c,version:r,author:l,license:s,social:d,_type:u}=e,[p,m]=React.useState(Xe[u].isEnabled(i)),[h,f]=React.useState(!1);return window.React.createElement("div",{className:"velocity-addon-card"},window.React.createElement("div",{className:"addon-card-header",onClick:()=>{Xe[u].toggle(i),m(!p),f(!1)},onContextMenu:e=>{O(e,[{label:"Enable",type:"check",checked:p,onChange:e=>{Xe[u].toggle(i),m(e)}},{type:"separator"},{label:"Unlink",action:()=>{Xe[u].unlink(i)},icon:n.Trash.default,color:"Danger"}])}},window.React.createElement("div",{className:"addon-card-header-left"},window.React.createElement("div",{className:"addon-card-header-title"},i),window.React.createElement("div",{className:"addon-card-header-subtitle"},r," by ","string"==typeof l?l:l.name)),window.React.createElement("div",{className:"addon-card-header-right"},window.React.createElement(Ge,{checked:p}))),window.React.createElement("div",{className:"addon-card-lower"},window.React.createElement("div",{className:"addon-card-description"},window.React.createElement(o,null,c)),window.React.createElement("div",{className:"addon-card-footer"},Je([e,"access",e=>e.instance,"optionalAccess",e=>e.renderSettings])&&window.React.createElement(a,{disabled:!p,tooltipText:"Settings",innerClassName:"addon-card-panelbutton",icon:n.Gear.default,onClick:()=>{f(!h)}}),(Je([d,"optionalAccess",e=>e.invite])||Je([d,"optionalAccess",e=>e.github])||Je([d,"optionalAccess",e=>e.website])||Je([d,"optionalAccess",e=>e.donate]))&&window.React.createElement(a,{tooltipText:"Social",icon:n.Link.default,onClick:e=>{O(e,[d.invite&&{label:"Invite",action:()=>{window.open(new URL(d.invite,"https://discord.gg/").href)}},d.github&&{label:"GitHub",action:()=>{window.open(new URL(d.github).href)}},d.website&&{label:"Website",action:()=>{window.open(new URL(d.website).href)}},d.donate&&{label:"Donate",action:()=>{window.open(new URL(d.donate).href)}}])}}),window.React.createElement(a,{tooltipText:"Open Folder",innerClassName:"addon-card-panelbutton",icon:n.Folder.default,onClick:()=>{Xe[u].openFolder(i)}}),window.React.createElement(a,{tooltipText:"Unlink",innerClassName:"addon-card-panelbutton",icon:n.Trash.default,onClick:()=>{Xe[u].unlink(i)}}))),h&&p&&window.React.createElement("div",{className:"addon-card-settings"},window.React.createElement("div",{className:"addon-card-settings-header"},window.React.createElement("svg",{width:"12",height:"12",viewBox:"0 0 24 24",onClick:()=>{f(!1)}},window.React.createElement("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})),window.React.createElement(ze,{style:{marginBottom:"0"},tag:"h5"},"Settings")),Je([e,"access",e=>e.instance,"optionalAccess",e=>e.renderSettings])&&e.instance.renderSettings().map((t=>{if(!t)return null;try{const n=n=>{"function"==typeof t.action&&t.action(n),e.instance.settings[t.id]=n};switch(t.type){case"switch":return window.React.createElement(qe,{container:i,setting:t.id,name:t.name,note:t.note,action:n});case"slider":return window.React.createElement(Ye,{container:i,setting:t.id,name:t.name,note:t.note,minValue:0|t.min,maxValue:100|t.max,units:""|t.units,handleSize:10|t.handleSize,action:n});case"text":return window.React.createElement(Ze,{container:i,setting:t.id,name:t.name,note:t.note,action:n});case"color":return window.React.createElement(We,{container:i,defaultColor:t.default,setting:t.id,name:t.name,note:t.note,action:n})}}catch(e){F("Error rendering settings for "+i,{type:"error"})}}))))},et=e=>{const{title:t,children:n}=e;return[window.React.createElement(ze,{tag:"h1"},t),n]},tt=e=>{const{type:t="right",width:n=24,height:o=24,style:a}=e;switch(t){case"down":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M10.59 2.59 6 7.17 1.41 2.59 0 4 6 10 12 4 10.59 2.59Z"}));case"up":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M1.41 9.41 6 4.83 10.59 9.41 12 8 6 2 0 8 1.41 9.41Z"}));case"left":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M9.41 1.41 4.83 6 9.41 10.59 8 12 2 6 8 0 9.41 1.41Z"}));case"right":return window.React.createElement("svg",{viewBox:"-2 -2 16 16",width:n,height:o,style:a},window.React.createElement("path",{fill:"currentColor",d:"M2.59 10.59 7.17 6 2.59 1.41 4 0 10 6 4 12 2.59 10.59Z"}))}};S("setting-section",{".velocity-setting-section":{display:"flex",color:"var(--header-secondary)",alignItems:"center",gap:"5px"},".velocity-setting-section svg":{transition:"all 0.2s ease"},".velocity-setting:not(.velocity-switch-setting)":{paddingBlock:"15px",borderBottom:"thin solid var(--background-modifier-accent)"},".velocity-switch-setting":{paddingTop:"15px"},".velocity-setting:not(.velocity-switch-setting):last-child":{borderBottom:"none",paddingBottom:"0"}});var nt=e=>{const{title:t,children:n,collapsable:o=!0}=e,[a,i]=React.useState(!1);return[window.React.createElement("div",{className:"velocity-setting-section",onClick:()=>{i(!a)}},o&&window.React.createElement(tt,{type:"right",width:12,height:12,style:{transform:`rotate(${a?0:90}deg)`}}),window.React.createElement(ze,{tag:"h5",style:{margin:"0"}},t)),a?null:n]};const ot=(e,t)=>{let n=[];switch(typeof t){case"string":e.map((e=>{e.name&&e.description&&e.author&&(e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||e.author.name.toLowerCase().includes(t.toLowerCase()))&&n.push(e)}));break;case"object":e.map((e=>{e.name&&e.description&&e.author&&(e.name.toLowerCase().includes(t.target.value.toLowerCase())||e.description.toLowerCase().includes(t.target.value.toLowerCase())||e.author.name.toLowerCase().includes(t.target.value.toLowerCase()))&&n.push(e)}))}return n},{WebpackModules:at}=_e;S("empty-state",{".velocity-empty-state-huge > div:first-child":{height:"186px"},".velocity-empty-state-tiny > div:first-child":{height:"60px"}});var it=e=>{const{Components:t}=at.common,n=t.EmptyState.default,{artURL:o="",header:a="",description:i="",size:c="huge",CTAAction:r,CTALabel:l}=e;return window.React.createElement(n,{className:`velocity-empty-state-${c}`,size:c,artURL:o,header:a,description:i,onCTAClick:r,callToAction:l})};const{CoreUpdater:ct,ThemeUpdater:rt,PluginUpdater:lt,WebpackModules:st,AddonManager:dt}=_e;S("updater",{".velocity-updater":{display:"flex",flexDirection:"column"},".velocity-updater-banner":{backgroundColor:"var(--background-secondary)",borderRadius:"5px",padding:"12px",display:"flex",gap:"10px",marginBottom:"20px"},".velocity-updater .velocity-setting-section + .velocity-setting-section":{marginTop:"12px"},".velocity-updater-indicator":{display:"flex",alignItems:"center",justifyContent:"center",aspectRatio:"1",height:"100px",borderRadius:"3px",backgroundColor:"var(--background-primary)"},".velocity-updater-buttons":{display:"flex",gap:"5px",marginTop:"auto"},".velocity-updater-icon":{fill:"currentColor",width:"100%",height:"100%"},".velocity-updater-icon.available":{color:"#5B88FC"},".velocity-updater-icon.no-updates":{color:"#43B581"},".velocity-updater-icon.error":{color:"#F04747"},".velocity-updater-icon.checking":{color:"#FAA61A"},".velocity-updater-icon.check":{color:"#43B581"},".velocity-updater-icon.idle":{color:"var(--text-muted)"},".velocity-updater-content":{display:"flex",flexDirection:"column",gap:"5px"},".velocity-updater-title":{fontSize:"18px",fontWeight:"500",color:"var(--header-primary)"},".velocity-updater-subtitle":{fontSize:"14px",fontWeight:"400",color:"var(--text-normal)",display:"flex",gap:"3px"},".velocity-updater-subtitle .velocity-updater-timestamp":{backgroundColor:"var(--background-modifier-accent)",borderRadius:"3px",padding:"0 2px"},".velocity-updater-addons":{marginBottom:"12px",display:"flex",flexDirection:"column"},".velocity-updater-empty":{display:"flex",alignItems:"center",marginBottom:"12px",gap:"5px"},".velocity-updater-addon":{backgroundColor:"var(--background-secondary)",borderRadius:"5px",padding:"12px",display:"flex",gap:"10px",marginTop:"5px",justifyContent:"space-between"},".velocity-updater-addon-info":{display:"flex",flexDirection:"column",gap:"5px"},".velocity-updater-addon-title":{fontSize:"16px",fontWeight:"500",color:"var(--header-primary)"},".velocity-updater-addon-diff":{fontSize:"14px",fontWeight:"400",color:"var(--text-normal)"}});const ut=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon available",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"})),pt=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon no-updates",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"})),mt=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon checking",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),ht=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon error",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-5h2v2h-2v-2zm0-8h2v6h-2V7z"})),ft=e=>window.React.createElement("svg",{...e,className:"velocity-updater-icon idle",viewBox:"0 0 24 24"},window.React.createElement("path",{d:"M9.27,4.49c-1.63,7.54,3.75,12.41,7.66,13.8C15.54,19.38,13.81,20,12,20c-4.41,0-8-3.59-8-8C4,8.55,6.2,5.6,9.27,4.49 M11.99,2.01C6.4,2.01,2,6.54,2,12c0,5.52,4.48,10,10,10c3.71,0,6.93-2.02,8.66-5.02c-7.51-0.25-12.09-8.43-8.32-14.97 C12.22,2.01,12.11,2.01,11.99,2.01L11.99,2.01z"}));var wt=()=>{const{Components:e}=st.common,t=(()=>{const[e,t]=React.useState(0);return()=>t((e=>e+1))})(),{state:n,updateInfo:o,updateAvailable:a,lastChecked:i}=ct,c="checking"===n?mt():"available"===n?ut():"no-updates"===n?pt():"error"===n?ht():ft(),r="checking"===n?"Checking for updates...":"available"===n?"Update available":"no-updates"===n?"No updates available":"error"===n?"An Error Occurred!":"Idle",l=((e,t=Date.now())=>{const n=[["year",31536e6],["month",2628e6],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]],o=t-e;for(const[e,t]of n){if(o>=t){const n=Math.floor(o/t);return`${n} ${e}${1===n?"":"s"} ago`}if("second"===e)return"just now"}})(i);e.FormText.default;const s=e.ButtonModules,d=e.TooltipContainer.default,u={...lt.updateInfo,...rt.updateInfo},p=new Date(i);return window.React.createElement("div",{className:"velocity-updater"},window.React.createElement("div",{className:"velocity-updater-banner"},window.React.createElement("div",{className:"velocity-updater-indicator"},c),window.React.createElement("div",{className:"velocity-updater-content"},window.React.createElement("div",{className:"velocity-updater-title"},r),window.React.createElement("div",{className:"velocity-updater-subtitle"},"available"===n?`Version ${o.version} is available.`:["Last checked",window.React.createElement(d,{text:p.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),children:e=>window.React.createElement("div",{...e,className:"velocity-updater-timestamp"},l)})]),window.React.createElement("div",{className:"velocity-updater-buttons"},"available"===n?window.React.createElement(s.default,{color:s.ButtonColors.GREEN,onClick:()=>{ct.downloadUpdate(),t()}},"Update"):window.React.createElement(s.default,{color:s.ButtonColors.BRAND,onClick:async()=>{await ct.checkForUpdates(),await lt.checkForUpdates(),await rt.checkForUpdates(),t()}},"Check for updates")))),window.React.createElement(nt,{title:"Addons"},window.React.createElement("div",{className:"velocity-updater-"+(Object.keys(u||{}).length?"addons":"empty")},function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([Object,"access",e=>e.keys,"call",e=>e(u||{}),"optionalAccess",e=>e.length])?Object.keys(u).map((e=>window.React.createElement("div",{className:"velocity-updater-addon"},window.React.createElement("div",{className:"velocity-updater-addon-info"},window.React.createElement("div",{className:"velocity-updater-addon-title"},e),window.React.createElement("div",{className:"velocity-updater-addon-diff"},u[e].manifest.main.endsWith(".js")?dt.Plugins.get(e).version:dt.Themes.get(e).version," > ",u[e].manifest.version)),window.React.createElement("div",{className:"velocity-updater-addon-buttons"},window.React.createElement(s.default,{color:s.ButtonColors.GREEN,onClick:()=>{(u[e].manifest.main.endsWith(".js")?lt:rt).downloadUpdate(e),t()}},"Update"))))):window.React.createElement(it,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any addon updates",description:"Now go and enjoy your day!"}))))};const gt=ee("config"),yt=new o("Snippets"),vt=VelocityCore.modules.sucrase,bt=e=>{gt.editorTabs.forEach((t=>{switch(function(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}([t,"optionalAccess",e=>e.language])){case"js":if("css"==e)return;try{const e=vt.transform(t.content,{transforms:["jsx"]}).code;new Function("Velocity","VelocityCore",e)(Velocity,VelocityCore)}catch(e){F(`Error running snippet '${t.name}'`,{type:"error"}),yt.error(`Error running snippet '${t.name}'.`,e)}break;case"css":if("js"==e)return;const n=document.createElement("style");n.setAttribute("id",`velocity-snippet-${t.name}-style`),n.innerHTML=t.content,b.appendChild(n)}}))};function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xt(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){kt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}function jt(e){return function t(){for(var n=this,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return t.apply(n,[].concat(a,o))}}}function Tt(e){return{}.toString.call(e).includes("Object")}function Lt(e){return"function"==typeof e}var Ot=jt((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),Pt={changes:function(e,t){return Tt(t)||Ot("changeType"),Object.keys(t).some((function(t){return n=e,o=t,!Object.prototype.hasOwnProperty.call(n,o);var n,o}))&&Ot("changeField"),t},selector:function(e){Lt(e)||Ot("selectorType")},handler:function(e){Lt(e)||Tt(e)||Ot("handlerType"),Tt(e)&&Object.values(e).some((function(e){return!Lt(e)}))&&Ot("handlersType")},initial:function(e){var t;e||Ot("initialIsRequired"),Tt(e)||Ot("initialType"),t=e,Object.keys(t).length||Ot("initialContent")}};function $t(e,t){return Lt(t)?t(e.current):t}function It(e,t){return e.current=Mt(Mt({},e.current),t),t}function Dt(e,t,n){return Lt(t)?t(e.current):Object.keys(n).forEach((function(n){var o;return null===(o=t[n])||void 0===o?void 0:o.call(t,e.current[n])})),n}var Ft={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pt.initial(e),Pt.handler(t);var n={current:e},o=jt(Dt)(n,t),a=jt(It)(n),i=jt(Pt.changes)(e),c=jt($t)(n);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return Pt.selector(e),e(n.current)}function l(e){Nt(o,a,i,c)(e)}return[r,l]}};var _t,Bt={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},Vt=(_t=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return o.length>=_t.length?_t.apply(this,o):function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e.apply(t,[].concat(o,a))}})(Bt),Ut={config:function(e){var t;return e||Vt("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||Vt("configType"),e.urls?(console.warn(Bt.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function zt(e,t){return Object.keys(t).forEach((function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],zt(e[n],t[n]))})),Et(Et({},e),t)}var Ht={type:"cancelation",msg:"operation is manually canceled"};function Wt(e){var t=!1,n=new Promise((function(n,o){e.then((function(e){return t?o(Ht):n(e)})),e.catch(o)}));return n.cancel=function(){return t=!0},n}var Zt,Gt,qt=Ft.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.33.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),Yt=(Gt=2,function(e){if(Array.isArray(e))return e}(Zt=qt)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,a=!1,i=void 0;try{for(var c,r=e[Symbol.iterator]();!(o=(c=r.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return n}}(Zt,Gt)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(Zt,Gt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Jt=Yt[0],Kt=Yt[1];function Xt(e){return document.body.appendChild(e)}function Qt(e){var t,n,o=Jt((function(e){return{config:e.config,reject:e.reject}})),a=(t="".concat(o.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return a.onload=function(){return e()},a.onerror=o.reject,a}function en(){var e=Jt((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){tn(t),e.resolve(t)}),(function(t){e.reject(t)}))}function tn(e){Jt().monaco||Kt({monaco:e})}var nn=new Promise((function(e,t){return Kt({resolve:e,reject:t})})),on={config:function(e){var t=Ut.config(e),n=t.monaco,o=xt(t,["monaco"]);Kt((function(e){return{config:zt(e.config,o),monaco:n}}))},init:function(){var e=Jt((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(Kt({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Wt(nn);if(window.monaco&&window.monaco.editor)return tn(window.monaco),e.resolve(window.monaco),Wt(nn);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(Xt,Qt)(en)}return Wt(nn)},__getMonacoInstance:function(){return Jt((function(e){return e.monaco}))}},an=e=>{const{options:t,value:n,onChange:o}=e,{Components:a,Classes:i}=w.common,[c,r]=React.useState(n||0),l=a.Text.default,s=i.RadioItems,d=i.Position;return window.React.createElement("div",{className:"radio-group",role:"radiogroup",style:{textAlign:"left"}},t.map(((e,n)=>window.React.createElement("div",{className:`${s.item} ${d.directionRow} ${s.itemFilled}`,role:"radio",tabindex:n,"aria-checked":c==n,onClick:()=>{r(n),o(t[n].value)}},window.React.createElement("div",{className:s.radioBar,style:{padding:"10px"}},window.React.createElement("div",null,window.React.createElement("svg",{"aria-hidden":"true",role:"img",width:"24",height:"24",viewBox:"0 0 24 24"},window.React.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",fill:"currentColor"}),c==n&&window.React.createElement("circle",{cx:"12",cy:"12",r:"5",className:s.radioIconForeground,fill:"currentColor"}))),window.React.createElement("div",{className:s.info},window.React.createElement(l,{size:l.Sizes.SIZE_16,color:""},e.name)))))))};function cn(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const rn=ee("config"),ln=VelocityCore.modules.fs,sn=VelocityCore.modules.path,dn=VelocityCore.baseDir,{WebpackModules:un}=_e,pn=ln.readFileSync(sn.join(dn,"index.d.ts"),"utf8");let mn;S("editor",{".velocity-editor-modal-body":{display:"flex",flexDirection:"column",alignItems:"flex-start"},".velocity-editor-modal-body > div":{width:"100%"},".velocity-editor":{backgroundColor:"var(--background-secondary)",borderRadius:"4px",width:"100%",height:"600px",display:"flex",overflow:"hidden",flexDirection:"column"},".editor-header":{display:"flex",height:"40px",alignItems:"center",justifyContent:"space-between",padding:"24px 10px"},".editor-header-buttons":{display:"flex",gap:"5px"},".editor-body":{width:"100%",height:"100%",display:"flex"},".editor-sidebar":{width:"200px",height:"100%",backgroundColor:"var(--background-secondary-alt)",display:"flex",flexDirection:"column",gap:"5px",padding:"10px",overflow:"auto"},".editor-sidebar-tab":{color:"var(--text-normal)",display:"flex",alignItems:"center",gap:"10px",padding:"8px 10px",borderRadius:"4px",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},".editor-sidebar-tab:hover":{backgroundColor:"var(--background-modifier-hover)"},".editor-sidebar-tab.active":{backgroundColor:"var(--background-modifier-active)"},"#editor-container":{height:"100%",width:"100%"}}),rn.editorTabs||(rn.editorTabs=[]);const hn=new $(...rn.editorTabs);new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e)})).then((()=>{on.init().then((e=>{mn=e,window.monaco=mn,mn.languages.typescript.javascriptDefaults.addExtraLib(pn,"velocity.d.ts"),mn.editor.create(document.getElementById("editor-container"),{})}))}));var fn=e=>{const{Components:t,Icons:n,Actions:o}=un.common,[a,i]=React.useState(0),[c,r]=React.useState(hn);React.useEffect((()=>(window.editor=mn.editor.create(document.getElementById("editor-container"),{value:l?cn([l,"optionalAccess",e=>e.content]):"/* No File Selected. */\n/* Select a file from the sidebar to edit it. */",language:l?"js"==cn([l,"optionalAccess",e=>e.language])?"javascript":"css":"javascript",theme:"vs-dark",minimap:{enabled:!1}}),window.editor.onDidChangeModelContent((e=>{if(l){if(!1!==cn([e,"access",e=>e.changes,"optionalAccess",e=>e[0],"optionalAccess",e=>e.forceMoveMarkers]))return;hn.splice(a,1,{...hn[a],content:window.editor.getValue()})}b.querySelectorAll("style[id^='velocity-snippet-'][id$='-style']").forEach((e=>e.remove())),bt("css")})),()=>{window.editor.dispose()}))),hn.addListener((e=>{r(e),rn.editorTabs=e}));let l=rn.editorTabs[a];const s=t.PanelButton.default,d=t.TextInput.default,u=o.ModalActions,p=t.Alert.default;return window.React.createElement("div",{className:"velocity-editor"},window.React.createElement("div",{className:"editor-header"},window.React.createElement(ze,{tag:"h5",style:{margin:"0"}},l?`${cn([l,"optionalAccess",e=>e.name])}.${cn([l,"optionalAccess",e=>e.language])}`:"None Selected"),window.React.createElement("div",{className:"editor-header-buttons"},"js"==cn([l,"optionalAccess",e=>e.language])&&window.React.createElement(s,{tooltipText:"Run",icon:n.Play.default,onClick:()=>{bt("js")}}),window.React.createElement(s,{tooltipText:"New File",icon:n.Plus.default,onClick:()=>{let e="",t="js";u.openModal((n=>window.React.createElement(p,{...n,title:"New File",body:window.React.createElement("div",{className:"velocity-editor-modal-body"},window.React.createElement(ze,{tag:"h5"},"Name"),window.React.createElement(d,{style:{marginBottom:"10px"},onChange:t=>{e=t},placeholder:"Name"}),window.React.createElement(ze,{tag:"h5"},"Language"),window.React.createElement(an,{options:[{name:"JavaScript",value:"js"},{name:"CSS",value:"css"}],value:t,onChange:e=>{t=e}})),onConfirm:()=>e?["js","css"].includes(t)?(hn.push({name:e,language:t,content:""}),i(hn.length-1),window.editor.setValue(cn([l,"optionalAccess",e=>e.content])||""),mn.editor.setModelLanguage(window.editor.getModel(),"js"==cn([l,"optionalAccess",e=>e.language])?"javascript":"css"),void(l=rn.editorTabs[a])):F("Invalid language.",{type:"error"}):F("Name cannot be empty.",{type:"error"})})))}}),window.React.createElement(s,{tooltipText:"Options",icon:n.Gear.default,onClick:()=>{if(!l)return F("No File Selected",{type:"error"});let e=l.name;u.openModal((t=>window.React.createElement(p,{...t,title:"Options",body:window.React.createElement("div",{className:"velocity-editor-modal-body"},window.React.createElement(ze,{tag:"h5"},"Name"),window.React.createElement(d,{onChange:t=>{e=t},placeholder:"Name"})),onConfirm:()=>{e&&(hn.splice(a,1,{name:e,language:cn([l,"optionalAccess",e=>e.language]),content:cn([l,"optionalAccess",e=>e.content])}),i(hn.findIndex((t=>t.name==e))),window.editor.setValue(cn([l,"optionalAccess",e=>e.content])||""),mn.editor.setModelLanguage(window.editor.getModel(),"js"==cn([l,"optionalAccess",e=>e.language])?"javascript":"css"),l=rn.editorTabs[a])}})))}}),window.React.createElement(s,{tooltipText:"Delete File",icon:n.Trash.default,onClick:()=>{if(!l)return F("No File Selected",{type:"error"});hn.activeFilter(((e,t)=>t!==a)),i(0),r(hn)}}))),window.React.createElement("div",{className:"editor-body"},window.React.createElement("div",{className:"editor-sidebar"},c.map(((e,t)=>window.React.createElement("div",{key:t,className:"editor-sidebar-tab "+(t==a?"active":""),onClick:()=>{i(t),editor.setValue(e.content),mn.editor.setModelLanguage(window.editor.getModel(),"js"==cn([l,"optionalAccess",e=>e.language])?"javascript":"css"),l=rn.editorTabs[a]}},cn([e,"optionalAccess",e=>e.name]),".",cn([e,"optionalAccess",e=>e.language]))))),window.React.createElement("div",{id:"editor-container"})))},wn="velocity:handle-kill";const gn=ee("config"),yn=(e,t)=>{E.style.setProperty(e,t)};function vn(e){let t,n=e[0],o=1;for(;o<e.length;){const a=e[o],i=e[o+1];if(o+=2,("optionalAccess"===a||"optionalCall"===a)&&null==n)return;"access"===a||"optionalAccess"===a?(t=n,n=i(n)):"call"!==a&&"optionalCall"!==a||(n=i(((...e)=>n.call(t,...e))),t=void 0)}return n}const bn=VelocityCore.modules.ipcRenderer;new o("Settings");const Cn=ee("config");var Rn={get websockets(){return DiscordNative.nativeModules.requireModule("discord_rpc").RPCWebSocket.ws},init(){this.socket=new this.websockets.Server({port:1842}),this.socket.on("connection",(e=>{let t=!1;const n=V({title:"New Socket Connection",content:"A new socket connection has been established.",buttons:[{label:"Okay",action:()=>{n(),t=!0}},{label:"Disconnect",color:"RED",action:()=>{e.close(),n()}}]});e.on("message",(n=>{switch(n){case"velocity:get-client-data":e.send("velocity:data"+JSON.stringify({platform:DiscordNative.process.platform,version:DiscordNative.app.getVersion(),channel:DiscordNative.app.getReleaseChannel()}));break;case"velocity:reload":t&&location.reload();break;case"velocity:relaunch":t&&DiscordNative.app.relaunch()}if(n.startsWith("velocity:install-addon")){DiscordNative.window.focus();const e=n.split("|")[1],t=n.split("|")[2];e&&U({title:`Install ${t||"Addon"}?`,content:"Are you sure you want to install this addon? Addons can be dangerous and can break your Discord client.",confirmText:"Install",danger:!0,onConfirm:()=>{Te(e)}})}}))}))}};const En=ee("config"),xn=new o("Renderer");(async()=>{const e=Date.now();xn.log("Initialising..."),await w.globalPromise,window.Velocity=_e,Object.freeze(window.Velocity),xn.log(`API Added in ${Date.now()-e}ms`),window.DiscordSentry&&En.KillSentry&&(window.DiscordSentry.getCurrentHub().getClient().close(),xn.log("Killed Sentry")),En.StopWarnings&&(DiscordNative.window.setDevtoolsCallbacks(null,null),xn.log("Disabled Devtools Warnings")),Rn.init(),xn.log("Socket Initialised"),(()=>{const e=ne.hexToHSL(ne.intToHex(gn.NotificationBackground||1644828));E.style.setProperty("--velocity-notification-background",`hsla(${e[0]}, ${e[1]}%, ${e[2]}%, var(--velocity-notification-transparency,  100%))`),E.style.setProperty("--velocity-notification-transparency",gn.NotificationTransparency?`${gn.NotificationTransparency}%`:"100%"),E.style.setProperty("--velocity-notification-blur",gn.NotificationBlur?`${gn.NotificationBlur}px`:"0px")})(),xn.log("Variables Added"),(async()=>{const{WebpackModules:e,Utilities:t}=_e,n=new _e.Patcher("VelocityInternal_Settings"),o=await e.waitFor((e=>vn([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.getPredicateSections]))),a=(await e.waitFor((e=>vn([e,"access",e=>e.default,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.render,"optionalAccess",e=>e.toString,"call",e=>e(),"access",e=>e.includes,"call",e=>e("this.tabBar")])))).default;n.after(o.default.prototype,"getPredicateSections",((t,n)=>{let o=n.findIndex((e=>"discord nitro"==e.section.toLowerCase()))-2;if(o<0)return;const a=e=>{n.splice(o,0,e),o++},{Components:i,Classes:c,Actions:r}=e.common,l=i.FormDivider.default,s=i.ButtonModules,d=i.FormText.default,u=r.ModalActions;a({section:"DIVIDER"}),a({section:"HEADER",label:"Velocity"}),a({section:"settings",label:"Settings",className:"velocity-settings-tab",element:()=>[window.React.createElement(et,{title:"Settings"},window.React.createElement(nt,{title:"General"},window.React.createElement(qe,{name:"Stop DevTools Warnings",note:"Stops Discord from showing warnings when you open devtools.",setting:"StopWarnings"}),window.React.createElement(qe,{name:"Kill Sentry",note:"Kills Sentry, a tool used by Discord to track your client.",setting:"KillSentry"}),window.React.createElement(qe,{name:"Developer Mode",note:"Adds a settings tab with utilities for development.",setting:"DeveloperTab"})),window.React.createElement(nt,{title:"Window"},window.React.createElement(qe,{name:"Transparency",note:"Makes the window transparent.",setting:"Transparency"}),window.React.createElement(qe,{name:"MacOS Vibrancy",note:"Makes the window have a vibrancy effect on MacOS.",setting:"Vibrancy"})),window.React.createElement(nt,{title:"Notifications"},window.React.createElement(xe,null,window.React.createElement(s.default,{onClick:()=>{const e=V({title:"Notification",content:"This is a test notification",buttons:[{label:"Button",action:()=>{F("Toast")}},{label:"Dangerous Button",color:"RED",action:()=>{e()}}]})},style:{marginBlock:"10px"}},"Open Preview Notification")),window.React.createElement(We,{defaultColor:Number(ne.getVariable("background-floating","hex").replace("#","0x"))||1579292,name:"Background Color",note:"The background color of notifications",setting:"NotificationBackground",action:e=>{const t=ne.hexToHSL(ne.intToHex(e));yn("--velocity-notification-background",`hsla(${t[0]}, ${t[1]}%, ${t[2]}%, var(--velocity-notification-transparency,  100%))`)}}),window.React.createElement(Ye,{name:"Background Opacity",note:"The opacity of the notification background",setting:"NotificationTransparency",action:e=>{yn("--velocity-notification-transparency",`${e}%`)},units:"%"}),window.React.createElement(Ye,{name:"Background Blur",note:"The blur of the notification background",setting:"NotificationBlur",action:e=>{yn("--velocity-notification-blur",`${Math.round(e)}px`)},maxValue:20,units:"px"})))]}),a({section:"plugins",label:"Plugins",className:"velocity-plugins-tab",element:()=>{const[e,t]=React.useState(he.plugins),[n,o]=React.useState(""),[a,i]=React.useState(!1);return React.useEffect((()=>{const e=e=>{t(e),i(!a)};return he.plugins.addListener(e),()=>{he.plugins._removeListener(e)}})),[window.React.createElement(et,{title:"Plugins"},window.React.createElement(Ue,{type:"plugins",onSearch:o}),ot(e,n).length?ot(e,n).map((e=>window.React.createElement(Qe,{...e}))):window.React.createElement(it,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any plugins",description:"Make sure they're installed and your search is correct"}))]}}),a({section:"themes",label:"Themes",className:"velocity-themes-tab",element:()=>{const[e,t]=React.useState(he.themes),[n,o]=React.useState(""),[a,i]=React.useState(!1);return React.useEffect((()=>{const e=e=>{t(e),i(!a)};return he.themes.addListener(e),()=>{he.themes._removeListener(e)}})),[window.React.createElement(et,{title:"Themes"},window.React.createElement(Ue,{type:"themes",onSearch:o}),ot(e,n).length?ot(e,n).map((e=>window.React.createElement(Qe,{...e}))):window.React.createElement(it,{artURL:"/assets/b669713872b43ca42333264abf9c858e.svg",header:"Couldn't find any themes",description:"Make sure they're installed and your search is correct"}))]}}),a({section:"snippets",label:"Snippets",className:"velocity-snippets-tab",element:()=>window.React.createElement(et,{title:"Snippets"},window.React.createElement(fn,null))}),a({section:"updater",label:"Updater",className:"velocity-updater-tab",element:()=>window.React.createElement(et,{title:"Updater"},window.React.createElement(wt,null))}),Cn.DeveloperTab&&a({section:"developer",label:"Developer",className:"velocity-developer-tab",element:()=>{const[e,t]=React.useState(""),[n,o]=React.useState(""),a=k();return window.React.createElement(et,{title:"Developer"},window.React.createElement(He,null,window.React.createElement(nt,{title:"Developer Tools",collapsable:!1},window.React.createElement(d,{style:{marginBlock:"8px 20px"}},"A collection of utilities for you to use in development."),window.React.createElement(l,{style:{marginBottom:"20px"}}),window.React.createElement(xe,null,window.React.createElement(s.default,{color:s.ButtonColors.RED,onClick:()=>{bn.invoke(wn)}},"Kill Process"),window.React.createElement(s.default,{onClick:()=>{const e=i.ModalElements.ModalRoot;u.openModal(window.React.createElement(e,{children:{}}))}},"React Crash")),window.React.createElement(l,{style:{marginBlock:"20px"}})),window.React.createElement(nt,{title:"Velocity Components"},window.React.createElement(Se,null,window.React.createElement(a,{title:"Notification Title",color:n,buttons:[{label:"Change Color",action:()=>{""===n?o("error"):"error"===n?o("success"):"success"===n?o("warning"):"warning"===n?o("velocity"):"velocity"===n&&o("")}},{label:"Change Toast Color",action:()=>{""===e?t("error"):"error"===e?t("success"):"success"===e?t("warning"):"warning"===e?t("velocity"):"velocity"===e&&t("")}}],id:"velocity-notification-9999"},"Notification Content")),window.React.createElement(Se,null,window.React.createElement(A,{color:e},"Toast Content")))))}})})),n.after(a.prototype,"render",((t,n)=>{const o=n.props.children;if(!o||!o.length||o.length<3)return;if(!o[o.length-3].type.toString().includes("separator"))return;if(!o[o.length-2].type.toString().includes("socialLinks"))return;const a=e.find(["versionHash"]),i=e.common.Components.Text.default,c=o[o.length-1].type;o[o.length-1].type=function(){const e=c(...arguments);return e.props.children.splice(1,0,window.React.createElement("span",{className:`${i.Colors.MUTED} ${i.Sizes.SIZE_12} ${a.line}`},"Velocity ",VelocityCore.Meta.version,window.React.createElement("span",{className:a.versionHash}," (",VelocityCore.Meta.hash,")"))),e}}))})(),xn.log("Settings Added"),await t((()=>w.common.React)),xn.log("React Loaded"),ReactDOM.render(window.React.createElement(M,{toasts:D}),C),ReactDOM.render(window.React.createElement(N,{notifications:B}),R),w.remapDefaults(),ve(),Ce(),xn.log("Plugins & Themes Initialised"),bt(),xn.log("Snippets Run"),w.remapDefaults(),setTimeout((()=>{_e.CoreUpdater.checkForUpdates(),_e.PluginUpdater.checkForUpdates(),_e.ThemeUpdater.checkForUpdates()}),1e3)})();
